/* =========================================
   FRIDGE SCAN PIPELINE - Optimizations
   Fallbacks, performance et accessibility
   ========================================= */

/* Fallback pour backdrop-filter non supporté */
@supports not (backdrop-filter: blur(1px)) {
  .glass-fridge-main-cta,
  .glass-fridge-photo-grid,
  .glass-fridge-analysis-card,
  .glass-fridge-progress-header,
  .glass-fridge-inventory-item,
  .glass-fridge-complement-card {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06)) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
  }
}

/* Prefers reduced motion */
@media (prefers-reduced-motion: reduce) {
  .fridge-breathing,
  .fridge-scan-line,
  .fridge-data-particle,
  .fridge-grid-pulse,
  .fridge-ring-pulse,
  .fridge-shimmer {
    animation: none !important;
  }

  .fridge-analysis-background-grid {
    opacity: 0.2 !important;
  }

  * {
    transition-duration: 0.1s !important;
  }
}

/* Prefers contrast high */
@media (prefers-contrast: high) {
  .glass-fridge-main-cta,
  .glass-fridge-photo-grid,
  .glass-fridge-analysis-card,
  .glass-fridge-inventory-item {
    border-width: 2px !important;
    background: rgba(255, 255, 255, 0.15) !important;
  }

  .glass-fridge-action-button {
    border-width: 3px !important;
    font-weight: 700 !important;
  }
}

/* Hover device optimisations */
@media (hover: hover) and (pointer: fine) {
  .glass-fridge-inventory-item:hover {
    transform: translateY(-2px) scale(1.01) translateZ(0);
    box-shadow: var(--fridge-shadow-md);
  }
}

/* Touch device optimisations */
@media (hover: none) and (pointer: coarse) {
  .glass-fridge-inventory-item:active {
    transform: scale(0.98) translateZ(0);
  }

  .glass-fridge-action-button:active {
    transform: scale(0.96) translateZ(0);
  }
}

/* Performance critique - Containment */
.fridge-scan-container {
  contain: layout style paint;
  content-visibility: auto;
  contain-intrinsic-size: 600px;
}

.fridge-loading-section {
  contain: layout style paint;
  content-visibility: auto;
  contain-intrinsic-size: 450px;
}

/* GPU acceleration pour tous les éléments animés */
.glass-fridge-main-cta,
.glass-fridge-photo-grid,
.glass-fridge-analysis-card,
.glass-fridge-inventory-item,
.fridge-photo-item,
.fridge-scan-line,
.fridge-data-particle,
.fridge-progress-bar-fill {
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Will-change stratégique - seulement sur interactions */
.glass-fridge-action-button:hover,
.glass-fridge-inventory-item:hover,
.fridge-photo-delete-btn:hover {
  will-change: transform;
}

/* Cleanup will-change après transition */
.glass-fridge-action-button,
.glass-fridge-inventory-item,
.fridge-photo-delete-btn {
  will-change: auto;
}
