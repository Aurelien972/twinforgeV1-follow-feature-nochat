const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/page-fridge-C1QVLxk9.js","assets/vendor-ZbFMzY-i.js","assets/utils-CUtLAp28.js","assets/supabase-8_3juhcZ.js","assets/stores-ZZM8MTtI.js","assets/ui-components-OHztaiDj.js","assets/motion-HGAT--uT.js","assets/page-fridge-scan-C_CisW7P.js","assets/page-fridge-scan-DAz6gEg3.css","assets/ui-components-DyoLTZgZ.css","assets/date-utils-BlBdbPk_.js"])))=>i.map(i=>d[i]);
import{u as z,j as e,b as B,R as _,e as te,cW as ae,r as H,cX as W,h as re}from"./vendor-ZbFMzY-i.js";import{r as ne,G as N,S as h,I as u,P as ie,a as oe,u as Y,p as le,o as ce,q as O,C as de}from"./ui-components-OHztaiDj.js";import{u as xe}from"./useScrollMemory-C-cdMoIK.js";import{u as G,a as D,l as f,s as $,i as me,_ as pe}from"./page-fridge-C1QVLxk9.js";import{c as Q,d as ge,e as ue,f as he}from"./page-fridge-scan-C_CisW7P.js";import{a as A,c as be}from"./stores-ZZM8MTtI.js";import{g as je,f as fe,a as ye,e as ve,b as Ne,F as we,d as Se,c as Ie}from"./FastingTipsCard-bR9ecz7z.js";import{h as Ce,F as J}from"./page-profile-C7_QN5um.js";import{m as y,A as De}from"./motion-HGAT--uT.js";import{s as q,g as X,f as S,h as L,p as I,j as R,k as Z,a as U,d as _e}from"./date-utils-BlBdbPk_.js";import"./utils-CUtLAp28.js";import"./supabase-8_3juhcZ.js";import"./forms-CBZzt5O6.js";function Fe(s,n,t){return s?{priority:"medium",color:"#EF4444",icon:"Timer",animation:"breathing"}:n?{priority:"medium",color:"#F59E0B",icon:"Timer",animation:"breathing"}:{priority:"high",color:"#F59E0B",icon:"Timer",animation:"pulse"}}function ke(s,n,t,a,l){return s?{title:"Session Active",subtitle:`Votre jeûne progresse${l?` - Phase ${l.name}`:""}`,buttonText:"Gérer ma session",encouragement:"Continuez votre excellent travail !"}:n&&t?{title:"Prêt à jeûner",subtitle:`Démarrez votre protocole ${Ce(t)?.name||t}`,buttonText:"Commencer le jeûne",encouragement:"Votre protocole est configuré et prêt"}:{title:"Forgez votre métabolisme !",subtitle:"Commencez votre première session de jeûne intermittent",buttonText:"Démarrer une session",encouragement:"Maîtrisez votre sèche avec le jeûne"}}function Te(s,n,t,a){const l=[];if(s){if(n>0){const c=Math.floor(n),i=Math.floor((n-c)*60);l.push(`${c}h ${i}m écoulées`)}t>0&&l.push(`Objectif ${t}h`),a&&l.push(`Phase ${a.name}`)}return l}const Ae=({className:s=""})=>{const n=z(),{click:t}=G(),a=ne()==="reduced",{isPerformanceMode:l}=D(),{profile:c}=A(),{isActive:i,session:d}=Q();ge();const r=ue(),x=he(),o=r/3600,p=d?.targetHours||16,j=c?.nutrition?.fastingWindow?.protocol,b=!!(j&&j!==""),m=i?je(o):null,g=Fe(i,b),v=ke(i,b,j,o,m),F=Te(i,o,p,m),k=l?"div":y.div,P=()=>{t(),n("/fasting/input")},w={background:`
      radial-gradient(circle at 30% 20%, color-mix(in srgb, ${g.color} 12%, transparent) 0%, transparent 60%),
      radial-gradient(circle at 70% 80%, color-mix(in srgb, ${g.color} 8%, transparent) 0%, transparent 50%),
      var(--glass-opacity)
    `,borderColor:`color-mix(in srgb, ${g.color} 25%, transparent)`,boxShadow:l?"0 12px 40px rgba(0, 0, 0, 0.25)":`
        0 12px 40px rgba(0, 0, 0, 0.25),
        0 0 30px color-mix(in srgb, ${g.color} 15%, transparent),
        inset 0 2px 0 rgba(255, 255, 255, 0.15)
      `,backdropFilter:l?"none":"blur(20px) saturate(160%)"},C={background:l?`linear-gradient(135deg, color-mix(in srgb, ${g.color} 35%, transparent), color-mix(in srgb, ${g.color} 25%, transparent))`:`
          radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
          radial-gradient(circle at 70% 70%, color-mix(in srgb, ${g.color} 15%, transparent) 0%, transparent 50%),
          linear-gradient(135deg, color-mix(in srgb, ${g.color} 35%, transparent), color-mix(in srgb, ${g.color} 25%, transparent))
        `,border:`2px solid color-mix(in srgb, ${g.color} 50%, transparent)`,boxShadow:l?"none":`
          0 0 30px color-mix(in srgb, ${g.color} 40%, transparent),
          0 0 60px color-mix(in srgb, ${g.color} 25%, transparent),
          inset 0 2px 0 rgba(255,255,255,0.3)
        `},M={background:`linear-gradient(135deg,
      color-mix(in srgb, ${g.color} 80%, transparent),
      color-mix(in srgb, ${g.color} 60%, transparent)
    )`,border:`2px solid color-mix(in srgb, ${g.color} 60%, transparent)`,boxShadow:l?`0 12px 40px color-mix(in srgb, ${g.color} 40%, transparent)`:`
          0 12px 40px color-mix(in srgb, ${g.color} 40%, transparent),
          0 0 60px color-mix(in srgb, ${g.color} 30%, transparent),
          inset 0 3px 0 rgba(255,255,255,0.4)
        `,backdropFilter:l?"none":"blur(20px) saturate(160%)",color:"#fff",transition:"all 0.2s ease"};return e.jsx("div",{className:`dynamic-fasting-cta w-full ${s}`,children:e.jsxs(N,{className:"p-6 md:p-8 pb-10 md:pb-12 text-center relative overflow-visible cursor-pointer w-full",onClick:P,interactive:!0,style:w,children:[e.jsx("div",{className:"training-hero-corners","aria-hidden":"true",children:[0,1,2,3].map(T=>e.jsx(k,{className:"corner-particle",style:{position:"absolute",width:"12px",height:"12px",borderRadius:"2px",background:`linear-gradient(135deg, ${g.color}, rgba(255, 255, 255, 0.8))`,boxShadow:l?"none":`0 0 20px ${g.color}`,top:T<2?"12px":"auto",bottom:T>=2?"12px":"auto",left:T%2===0?"12px":"auto",right:T%2===1?"12px":"auto",willChange:l?"auto":"transform, opacity"},...!l&&{initial:{rotate:T%2===0?45:-45},animate:{scale:[1,1.3,1],opacity:[.6,1,.6],rotate:T%2===0?[45,60,45]:[-45,-60,-45]},transition:{duration:3,repeat:1/0,delay:T*.2,ease:[.4,0,.2,1]}}},T))}),g.priority==="high"&&!l&&!a&&e.jsx("div",{className:"absolute inset-0 rounded-inherit pointer-events-none urgent-forge-glow-css",style:{background:`radial-gradient(circle at center, color-mix(in srgb, ${g.color} 8%, transparent) 0%, transparent 70%)`,filter:"blur(20px)",transform:"scale(1.2)",zIndex:-1}}),e.jsxs("div",{className:"relative z-10 space-y-4 md:space-y-6",children:[e.jsxs("div",{className:`w-16 h-16 md:w-20 md:h-20 mx-auto rounded-full flex items-center justify-center relative ${!l&&g.animation==="pulse"&&!a?"icon-pulse-css":!l&&g.animation==="breathing"&&!a?"icon-breathing-css":""}`,style:C,children:[e.jsx(h,{Icon:u[g.icon],size:g.priority==="high"?36:32,style:{color:g.color}}),!l&&(g.priority==="high"||i)&&!a&&[...Array(i?4:6)].map((T,E)=>e.jsx("div",{className:`absolute w-2 h-2 rounded-full dynamic-particle-css dynamic-particle-css--${E+1}`,style:{left:`${15+E*15}%`,top:`${15+E%3*25}%`,background:g.color,boxShadow:`0 0 8px color-mix(in srgb, ${g.color} 60%, transparent)`}},E))]}),e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:v.title}),i&&d&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl md:text-6xl font-black mb-2",style:{color:g.color},children:fe(r)}),e.jsxs("div",{className:"text-lg md:text-xl text-white/90 font-semibold",children:["Objectif : ",d.targetHours,"h • ",Math.round(x),"% accompli"]})]}),e.jsx("div",{className:"max-w-md mx-auto",children:e.jsx("div",{className:"w-full bg-white/10 rounded-full h-3 overflow-hidden",children:e.jsx(k,{className:"h-3 rounded-full relative overflow-hidden",style:{background:`linear-gradient(90deg, ${g.color}, color-mix(in srgb, ${g.color} 80%, white))`,boxShadow:l?"none":`0 0 12px color-mix(in srgb, ${g.color} 60%, transparent)`,width:`${x}%`},...!l&&{initial:{width:0},animate:{width:`${x}%`},transition:{duration:.8,ease:"easeOut"}},children:!l&&e.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`linear-gradient(90deg,
                              transparent 0%,
                              rgba(255,255,255,0.4) 50%,
                              transparent 100%
                            )`,animation:"progressShimmer 2s ease-in-out infinite"}})})})})]}),e.jsx("p",{className:"text-white/80 text-base md:text-lg leading-relaxed max-w-md mx-auto",children:i&&m?`Phase ${m.name} • ${m.metabolicState}`:v.subtitle}),v.encouragement&&e.jsx("p",{className:"text-white/60 text-sm italic",children:v.encouragement})]}),F.length>0&&e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3 text-sm",children:F.map((T,E)=>e.jsx("div",{className:"px-3 py-1.5 rounded-full metric-badge-enter",style:{background:`color-mix(in srgb, ${g.color} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${g.color} 25%, transparent)`,color:g.color,backdropFilter:l?"none":"blur(8px) saturate(120%)",animationDelay:`${E*.1}s`},children:e.jsx("span",{className:"font-medium",children:T})},E))}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:P,className:`px-6 md:px-8 py-3 md:py-4 text-lg md:text-xl font-bold relative overflow-hidden rounded-full ${!l&&g.animation==="pulse"&&!a?"btn-breathing-css":""}`,style:M,children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(h,{Icon:u[g.icon],size:24,className:"text-white"}),e.jsx("span",{children:v.buttonText})]}),!l&&g.priority==="medium"&&!a&&e.jsx("div",{className:"absolute inset-0 rounded-inherit pointer-events-none dynamic-shimmer-css",style:{background:`linear-gradient(90deg,
                      transparent 0%,
                      rgba(255,255,255,0.3) 50%,
                      transparent 100%
                    )`}})]})}),!i&&e.jsx("div",{className:"text-center mt-2",children:e.jsx("p",{className:"text-white/60 text-sm",children:"Prêt à forger votre métabolisme"})}),i&&m&&d&&e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center p-3 rounded-xl",style:{background:`color-mix(in srgb, ${m.color} 12%, transparent)`,border:`1px solid color-mix(in srgb, ${m.color} 25%, transparent)`},children:[e.jsxs("div",{className:"text-xl font-bold text-white mb-1",children:[Math.round(ye(o,m)),"%"]}),e.jsxs("div",{className:"text-xs font-medium",style:{color:m.color},children:["Phase ",m.name]}),e.jsx("div",{className:"text-white/50 text-xs mt-0.5",children:"Progression"})]}),e.jsxs("div",{className:"text-center p-3 rounded-xl",style:{background:"color-mix(in srgb, #EF4444 12%, transparent)",border:"1px solid color-mix(in srgb, #EF4444 25%, transparent)"},children:[e.jsx("div",{className:"text-xl font-bold text-red-400 mb-1",children:ve(m,o,c?.weight_kg||70)}),e.jsx("div",{className:"text-red-300 text-xs font-medium",children:"Calories"}),e.jsx("div",{className:"text-white/50 text-xs mt-0.5",children:"Brûlées"})]}),e.jsxs("div",{className:"text-center p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-1 truncate",children:m.metabolicState}),e.jsx("div",{className:"text-white/70 text-xs font-medium",children:"État"}),e.jsx("div",{className:"text-white/50 text-xs mt-0.5",children:"Métabolique"})]}),e.jsxs("div",{className:"text-center p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-1 truncate",children:d.protocol}),e.jsx("div",{className:"text-white/70 text-xs font-medium",children:"Protocole"}),e.jsx("div",{className:"text-white/50 text-xs mt-0.5",children:"Actif"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl",style:{background:`color-mix(in srgb, ${m.color} 8%, transparent)`,border:`1px solid color-mix(in srgb, ${m.color} 20%, transparent)`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{Icon:u.Heart,size:14,style:{color:m.color}}),e.jsx("span",{className:"text-sm font-semibold",style:{color:m.color},children:"Message de la Forge"})]}),e.jsx("p",{className:"text-white/85 text-sm leading-relaxed",children:Ne(m)})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2 text-sm",children:[e.jsx(h,{Icon:u.Check,size:16,style:{color:m.color}}),"Bénéfices Actuels"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:m.benefits.slice(0,4).map((T,E)=>e.jsxs(k,{className:"flex items-center gap-2 p-2 rounded-lg",style:{background:`color-mix(in srgb, ${m.color} 6%, transparent)`,border:`1px solid color-mix(in srgb, ${m.color} 15%, transparent)`},...!l&&{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.4,delay:E*.1}},children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:m.color}}),e.jsx("span",{className:"text-white/80 text-xs",children:T})]},E))})]})]})]})]})})};function Ee(s){if(s.length===0)return{totalFastedHours:0,sessionsCount:0,averageDuration:0,longestSession:0,consistency:"needs_improvement",motivationalMessage:"Commencez votre première session de jeûne pour forger votre discipline temporelle !"};const n=s.filter(d=>d.status==="completed"&&d.actual_duration_hours),t=n.reduce((d,r)=>d+(r.actual_duration_hours||0),0),a=n.length>0?t/n.length:0,l=Math.max(0,...n.map(d=>d.actual_duration_hours||0));let c="needs_improvement",i="";return t>=16?(c="excellent",i="Excellente discipline ! Votre forge temporelle est parfaitement maîtrisée aujourd'hui."):t>=12?(c="good",i="Bonne progression ! Vous développez une solide discipline temporelle."):t>0?(c="needs_improvement",i="Bon début ! Continuez à forger votre discipline temporelle étape par étape."):i="Prêt à commencer votre forge temporelle ? Chaque session vous rapproche de vos objectifs.",{totalFastedHours:t,sessionsCount:n.length,averageDuration:a,longestSession:l,consistency:c,motivationalMessage:i}}function ee(){const{session:s}=A(),n=s?.user?.id;return B({queryKey:["fasting","today",n],queryFn:async()=>{if(!n)throw new Error("User not authenticated");const t=new Date,a=q(t).toISOString(),l=X(t).toISOString();f.info("FASTING_TODAY_SESSIONS","Fetching today fasting sessions",{userId:n,startDate:a,endDate:l,timestamp:new Date().toISOString()});const{data:c,error:i}=await $.from("fasting_sessions").select("*").eq("user_id",n).gte("start_time",a).lte("start_time",l).order("start_time",{ascending:!1});if(i)throw f.error("FASTING_TODAY_SESSIONS","Failed to fetch today sessions",{error:i.message,userId:n,timestamp:new Date().toISOString()}),i;const d=c||[],r=Ee(d);return f.info("FASTING_TODAY_SESSIONS","Today sessions fetched and stats calculated",{userId:n,sessionsCount:d.length,stats:r,timestamp:new Date().toISOString()}),{sessions:d,stats:r}},enabled:!!n,staleTime:2*60*1e3,refetchInterval:5*60*1e3,refetchOnWindowFocus:!0})}function Oe(s){switch(s){case"excellent":return{color:"#22C55E",icon:"Check",badge:"Excellent",description:"Discipline temporelle parfaite"};case"good":return{color:"#F59E0B",icon:"Target",badge:"Bien",description:"Bonne progression"};case"needs_improvement":return{color:"#F59E0B",icon:"TrendingUp",badge:"À améliorer",description:"Continuez vos efforts"}}}const Me=({className:s=""})=>{const{isPerformanceMode:n}=D(),{data:t,isLoading:a,error:l}=ee();if(a)return e.jsx(N,{className:`p-6 ${s}`,children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-48"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-32"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"h-20 bg-white/10 rounded-xl"}),e.jsx("div",{className:"h-20 bg-white/10 rounded-xl"}),e.jsx("div",{className:"h-20 bg-white/10 rounded-xl"})]})]})});if(l||!t)return e.jsx(N,{className:`p-6 ${s}`,style:{background:"color-mix(in srgb, #EF4444 8%, transparent)",borderColor:"color-mix(in srgb, #EF4444 20%, transparent)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center",children:e.jsx(h,{Icon:u.AlertCircle,size:16,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-300 font-semibold",children:"Erreur de Chargement"}),e.jsx("p",{className:"text-red-200 text-sm",children:"Impossible de charger les données du jour"})]})]})});const{stats:c}=t,i=Oe(c.consistency),d=S(new Date,"dd MMMM yyyy"),r=n?"div":y.div;return e.jsx(r,{...!n&&{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:[.25,.1,.25,1]}},className:s,children:e.jsx(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${i.color} 12%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, #F59E0B 8%, transparent) 0%, transparent 50%),
            var(--glass-opacity)
          `,borderColor:`color-mix(in srgb, ${i.color} 25%, transparent)`,boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.3)":`
              0 12px 40px rgba(0, 0, 0, 0.25),
              0 0 30px color-mix(in srgb, ${i.color} 15%, transparent),
              inset 0 2px 0 rgba(255, 255, 255, 0.15)
            `,backdropFilter:n?"none":"blur(20px) saturate(160%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
                    linear-gradient(135deg, color-mix(in srgb, ${i.color} 35%, transparent), color-mix(in srgb, ${i.color} 25%, transparent))
                  `,border:`2px solid color-mix(in srgb, ${i.color} 50%, transparent)`,boxShadow:n?"none":`0 0 20px color-mix(in srgb, ${i.color} 30%, transparent)`},children:e.jsx(h,{Icon:u[i.icon],size:20,style:{color:i.color}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Dernière Session Forgée"}),e.jsxs("p",{className:"text-white/80 text-sm mt-0.5",children:[d," • ",i.description]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"px-3 py-1.5 rounded-full",style:{background:`color-mix(in srgb, ${i.color} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${i.color} 25%, transparent)`},children:e.jsx("span",{className:"text-sm font-medium",style:{color:i.color},children:i.badge})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #F59E0B 12%, transparent)",border:"1px solid color-mix(in srgb, #F59E0B 25%, transparent)"},children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-400 mb-1",children:[c.totalFastedHours.toFixed(1),"h"]}),e.jsx("div",{className:"text-orange-300 text-sm font-medium",children:"Temps Total"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Jeûné"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #10B981 12%, transparent)",border:"1px solid color-mix(in srgb, #10B981 25%, transparent)"},children:[e.jsx("div",{className:"text-2xl font-bold text-green-400 mb-1",children:c.sessionsCount}),e.jsx("div",{className:"text-green-300 text-sm font-medium",children:"Sessions"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Complétées"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #8B5CF6 12%, transparent)",border:"1px solid color-mix(in srgb, #8B5CF6 25%, transparent)"},children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:c.averageDuration>0?`${c.averageDuration.toFixed(1)}h`:"--"}),e.jsx("div",{className:"text-purple-300 text-sm font-medium",children:"Moyenne"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Durée"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:c.longestSession>0?`${c.longestSession.toFixed(1)}h`:"--"}),e.jsx("div",{className:"text-white/70 text-sm font-medium",children:"Record"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Aujourd'hui"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl",style:{background:`color-mix(in srgb, ${i.color} 8%, transparent)`,border:`1px solid color-mix(in srgb, ${i.color} 20%, transparent)`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{Icon:u.Lightbulb,size:14,style:{color:i.color}}),e.jsx("span",{className:"text-sm font-semibold",style:{color:i.color},children:"Motivation du Jour"})]}),e.jsx("p",{className:"text-white/85 text-sm leading-relaxed",children:c.motivationalMessage})]})]})})})},$e=({onStartFasting:s})=>{const n=z(),{isPerformanceMode:t}=D(),a=t?"div":y.div,{profile:l}=A(),c=me(l),i=()=>{s?s():n("/fasting/input")};return e.jsxs(a,{...!t&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},className:"text-center py-12 py-1",children:[!c.isSufficient&&e.jsx("div",{className:"mb-6",children:e.jsx(ie,{completion:c,forgeName:"le suivi de jeûne",forgeColor:"#F59E0B"})}),e.jsx(N,{className:"p-8",style:{background:`radial-gradient(ellipse at center,
            rgba(245, 158, 11, 0.15) 0%,
            rgba(251, 191, 36, 0.08) 50%,
            rgba(0, 0, 0, 0.4) 100%)`,borderColor:"rgba(245, 158, 11, 0.3)",boxShadow:`
            0 0 30px rgba(245, 158, 11, 0.2),
            0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.1)
          `,backdropFilter:"blur(20px) saturate(1.2)"},children:e.jsxs("div",{className:"space-y-6 flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                rgba(245, 158, 11, 0.3) 0%,
                rgba(251, 191, 36, 0.15) 70%,
                transparent 100%)`,border:"1px solid rgba(245, 158, 11, 0.4)",boxShadow:`
                0 0 25px rgba(245, 158, 11, 0.3),
                0 4px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2)
              `},children:e.jsx(h,{Icon:u.Timer,size:48,className:"text-orange-400",style:{filter:`drop-shadow(0 0 12px rgba(245, 158, 11, 0.8))
                         drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3))`}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Commencez votre première session de jeûne"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Démarrez un tracker en temps réel avec analyse métabolique"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 my-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                    rgba(245, 158, 11, 0.3) 0%,
                    rgba(251, 191, 36, 0.1) 70%,
                    transparent 100%)`,border:"1px solid rgba(245, 158, 11, 0.4)",boxShadow:`
                    0 0 20px rgba(245, 158, 11, 0.3),
                    0 4px 15px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2)
                  `},children:e.jsx(h,{Icon:u.Play,size:24,className:"text-orange-400",style:{filter:`drop-shadow(0 0 8px rgba(245, 158, 11, 0.6))
                             drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Tracking temps réel"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Suivez vos phases métaboliques en direct"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                    rgba(245, 158, 11, 0.3) 0%,
                    rgba(251, 191, 36, 0.1) 70%,
                    transparent 100%)`,border:"1px solid rgba(245, 158, 11, 0.4)",boxShadow:`
                    0 0 20px rgba(245, 158, 11, 0.3),
                    0 4px 15px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2)
                  `},children:e.jsx(h,{Icon:u.Settings,size:24,className:"text-orange-400",style:{filter:`drop-shadow(0 0 8px rgba(245, 158, 11, 0.6))
                             drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Protocoles configurables"}),e.jsx("p",{className:"text-white/60 text-sm",children:"16:8, 18:6, OMAD ou personnalisé"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                    rgba(245, 158, 11, 0.3) 0%,
                    rgba(251, 191, 36, 0.1) 70%,
                    transparent 100%)`,border:"1px solid rgba(245, 158, 11, 0.4)",boxShadow:`
                    0 0 20px rgba(245, 158, 11, 0.3),
                    0 4px 15px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2)
                  `},children:e.jsx(h,{Icon:u.Sparkles,size:24,className:"text-orange-400",style:{filter:`drop-shadow(0 0 8px rgba(245, 158, 11, 0.6))
                             drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Analyses IA avancées"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Insights personnalisés et recommandations"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:i,className:"group relative px-8 py-4 text-white font-semibold rounded-2xl transform hover:scale-105 transition-all duration-300",style:{background:`linear-gradient(135deg,
                  rgba(245, 158, 11, 0.8) 0%,
                  rgba(251, 191, 36, 0.9) 100%)`,border:"2px solid rgba(245, 158, 11, 0.6)",boxShadow:`
                  0 0 30px rgba(245, 158, 11, 0.4),
                  0 8px 25px rgba(0, 0, 0, 0.3),
                  inset 0 1px 0 rgba(255, 255, 255, 0.2),
                  inset 0 -1px 0 rgba(0, 0, 0, 0.2)
                `,backdropFilter:"blur(10px) saturate(1.2)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{Icon:u.Play,size:24,className:"group-hover:scale-110 transition-transform duration-300",style:{color:"white",filter:`drop-shadow(0 0 10px rgba(245, 158, 11, 0.8))
                             drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3))`}}),e.jsx("span",{className:"text-lg",children:"Démarrer ma première session"})]}),e.jsx("div",{className:"absolute inset-0 rounded-2xl blur-xl opacity-50 group-hover:opacity-75 transition-opacity duration-300 -z-10",style:{background:`linear-gradient(135deg,
                    rgba(245, 158, 11, 0.6) 0%,
                    rgba(251, 191, 36, 0.6) 100%)`}})]})}),e.jsx("div",{className:"text-white/50 text-sm p-3 rounded-xl",style:{background:`radial-gradient(ellipse at center,
                rgba(245, 158, 11, 0.1) 0%,
                transparent 70%)`,border:"1px solid rgba(245, 158, 11, 0.2)",boxShadow:"0 0 15px rgba(245, 158, 11, 0.1)"},children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(h,{Icon:u.Lightbulb,size:16,className:"text-orange-400",style:{filter:"drop-shadow(0 0 6px rgba(245, 158, 11, 0.6))"}}),e.jsx("span",{children:"Astuce : Choisissez un protocole adapté à votre rythme de vie pour débuter !"})]})})]})})]})},Re=({onLoadingChange:s})=>{const{profile:n,session:t}=A(),{isActive:a,session:l}=Q(),{isPerformanceMode:c}=D(),i=c?"div":y.div,{data:d=!1,isLoading:r}=B({queryKey:["fasting-sessions","has-history",t?.user?.id],queryFn:async()=>{if(!t?.user?.id)return!1;const{supabase:x}=await pe(async()=>{const{supabase:j}=await import("./page-fridge-C1QVLxk9.js").then(b=>b.q);return{supabase:j}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])),{data:o,error:p}=await x.from("fasting_sessions").select("id").eq("user_id",t.user.id).limit(1);return p?!1:(o?.length||0)>0},enabled:!!t?.user?.id,staleTime:5*60*1e3});return!r&&!d&&!a?e.jsx($e,{}):e.jsxs(i,{...!c&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},className:"space-y-6",children:[e.jsx(oe,{profile:n,forgeContext:"fasting"}),e.jsx(Ae,{}),!a&&e.jsx(Me,{}),e.jsx(we,{})]})};function Pe(s,n,t){const a=[];f.debug("FASTING_INSIGHTS_MIN_DATA_CHECK","Checking minimum data requirements",{profileExists:!!s,sessionsCount:n,periodDays:t,profileData:s?{weight_kg:s.weight_kg,height_cm:s.height_cm,objective:s.objective,activity_level:s.activity_level}:null,minSessionsRequired:t===7?3:t===30?8:20,timestamp:new Date().toISOString()}),s?.weight_kg||a.push("Poids corporel"),s?.height_cm||a.push("Taille"),s?.objective||a.push("Objectif fitness"),s?.activity_level||a.push("Niveau d'activité");const l=t===7?3:t===30?8:20;return n<l&&a.push(`Au moins ${l} sessions de jeûne complétées`),f.debug("FASTING_INSIGHTS_MIN_DATA_RESULT","Minimum data check result",{sufficient:a.length===0,missingDataCount:a.length,missingData:a,minSessionsRequired:l,actualSessions:n,willProceedToEdgeFunction:a.length===0,timestamp:new Date().toISOString()}),{sufficient:a.length===0,missingData:a}}function Be(s=7){const{session:n,profile:t}=A(),a=n?.user?.id;return _.useEffect(()=>{f.debug("FASTING_INSIGHTS_HOOK_INIT","Hook initialized",{userId:a,periodDays:s,hasProfile:!!t,profileKeys:t?Object.keys(t):[],timestamp:new Date().toISOString()})},[a,s,t]),B({queryKey:["fasting","insights","ai",a,s],queryFn:async()=>{if(f.debug("FASTING_INSIGHTS_QUERY_START","Query function started",{userId:a,periodDays:s,timestamp:new Date().toISOString()}),!a)throw f.error("FASTING_INSIGHTS_QUERY_ERROR","User not authenticated",{userId:a,timestamp:new Date().toISOString()}),new Error("User not authenticated");const l=q(L(new Date,s)).toISOString(),c=new Date().toISOString();f.debug("FASTING_INSIGHTS_AI","Starting AI insights generation",{userId:a,periodDays:s,startDate:l,endDate:c,timestamp:new Date().toISOString()});const{data:i,error:d}=await $.from("fasting_sessions").select("id, status").eq("user_id",a).gte("start_time",l).lte("start_time",c);if(d)throw f.error("FASTING_INSIGHTS_AI","Failed to fetch sessions for data check",{error:d.message,userId:a,periodDays:s,timestamp:new Date().toISOString()}),d;const r=i||[],x=r.filter(g=>g.status==="completed").length;f.debug("FASTING_INSIGHTS_SESSIONS_DATA","Sessions fetched for insights",{userId:a,periodDays:s,totalSessions:r.length,completedSessions:x,sessionsData:r.map(g=>({id:g.id,status:g.status,date:g.start_time?g.start_time.split("T")[0]:"invalid"})),startDate:l,endDate:c,timestamp:new Date().toISOString()});const o=Pe(t,x,s);if(f.debug("FASTING_INSIGHTS_DATA_CHECK","Data sufficiency check result",{userId:a,periodDays:s,completedSessionsCount:x,minRequired:s===7?3:s===30?8:20,dataCheckSufficient:o.sufficient,missingData:o.missingData,willProceedToEdgeFunction:o.sufficient,profileData:{hasWeightKg:!!t?.weight_kg,hasHeightCm:!!t?.height_cm,hasObjective:!!t?.objective,hasActivityLevel:!!t?.activity_level},timestamp:new Date().toISOString()}),f.debug("FASTING_INSIGHTS_AI_DATA_CHECK","Data sufficiency check completed",{userId:a,periodDays:s,profileData:{hasWeightKg:!!t?.weight_kg,weightKg:t?.weight_kg,hasHeightCm:!!t?.height_cm,heightCm:t?.height_cm,hasObjective:!!t?.objective,objective:t?.objective,hasActivityLevel:!!t?.activity_level,activityLevel:t?.activity_level,hasEmotions:!!t?.emotions,chronotype:t?.emotions?.chronotype,hasNutrition:!!t?.nutrition,fastingProtocol:t?.nutrition?.fastingWindow?.protocol},sessionsData:{totalSessions:r.length,completedSessions:x,minRequired:s===7?3:s===30?8:15},dataCheckResult:{sufficient:o.sufficient,missingDataCount:o.missingData.length,missingData:o.missingData},timestamp:new Date().toISOString()}),!o.sufficient)return f.warn("FASTING_INSIGHTS_AI","Insufficient data for AI insights generation - returning basic summary",{userId:a,periodDays:s,sessionsCount:x,missingData:o.missingData,willReturnBasicData:!0,timestamp:new Date().toISOString()}),{summary:{overallScore:0,keyFindings:["Données insuffisantes pour l'analyse IA"],mainRecommendation:"Complétez votre profil et ajoutez plus de sessions de jeûne pour débloquer les insights de la Forge Spatiale",sentiment:"encouraging"},insights:[],dataQuality:"insufficient",analysisDate:new Date().toISOString(),periodDays:s,aiModel:"gpt-5-mini",tokensUsed:0,cached:!1,missingData:o.missingData};const p={userId:a,periodDays:s,profile:{weight_kg:t?.weight_kg,height_cm:t?.height_cm,objective:t?.objective,activity_level:t?.activity_level,sex:t?.sex,birthdate:t?.birthdate,emotions:t?.emotions,nutrition:t?.nutrition}};f.debug("FASTING_INSIGHTS_EDGE_CALL_PAYLOAD","About to call Edge Function with payload",{userId:a,periodDays:s,payload:p,payloadSize:JSON.stringify(p).length,timestamp:new Date().toISOString()}),f.debug("FASTING_INSIGHTS_AI_EDGE_CALL","About to call AI insights generator Edge Function",{userId:a,periodDays:s,profileKeys:t?Object.keys(t):[],completedSessionsCount:x,dataCheckPassed:!0,timestamp:new Date().toISOString()}),f.debug("FASTING_INSIGHTS_AI","Calling AI insights generator Edge Function",{userId:a,periodDays:s,profileKeys:t?Object.keys(t):[],timestamp:new Date().toISOString()});const{data:j,error:b}=await $.functions.invoke("fasting-insights-generator",{body:p});if(f.debug("FASTING_INSIGHTS_EDGE_RESPONSE","Edge Function response received",{userId:a,periodDays:s,hasResponse:!!j,hasError:!!b,errorMessage:b?.message,responseKeys:j?Object.keys(j):[],timestamp:new Date().toISOString()}),b)throw f.error("FASTING_INSIGHTS_AI","AI insights generation failed",{error:b.message,userId:a,periodDays:s,timestamp:new Date().toISOString()}),new Error(`AI insights generation failed: ${b.message}`);const m=j;return f.debug("FASTING_INSIGHTS_AI","AI insights generated successfully",{userId:a,periodDays:s,insightsCount:m.insights.length,dataQuality:m.dataQuality,overallScore:m.summary.overallScore,tokensUsed:m.tokensUsed,cached:m.cached,aiModel:m.aiModel,timestamp:new Date().toISOString()}),m},enabled:!!a,staleTime:15*60*1e3,gcTime:30*60*1e3,retry:1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,structuralSharing:!1})}function ze(s){if(s.length===0)return{totalSessions:0,completedSessions:0,cancelledSessions:0,totalHours:0,averageDuration:0,longestSession:0,shortestSession:0,mostUsedProtocol:null,firstSessionDate:null,lastSessionDate:null};const n=s.filter(b=>b.status==="completed"&&b.actual_duration_hours),t=s.filter(b=>b.status==="cancelled"),a=n.reduce((b,m)=>b+(m.actual_duration_hours||0),0),l=n.length>0?a/n.length:0,c=n.map(b=>b.actual_duration_hours||0).filter(b=>b>0),i=c.length>0?Math.max(...c):0,d=c.length>0?Math.min(...c):0,r={};s.forEach(b=>{b.protocol_id&&(r[b.protocol_id]=(r[b.protocol_id]||0)+1)});const x=Object.entries(r).sort(([,b],[,m])=>m-b)[0]?.[0]||null,o=[...s].sort((b,m)=>new Date(b.start_time).getTime()-new Date(m.start_time).getTime()),p=o[0]?.start_time||null,j=o[o.length-1]?.start_time||null;return{totalSessions:s.length,completedSessions:n.length,cancelledSessions:t.length,totalHours:Math.round(a*10)/10,averageDuration:Math.round(l*10)/10,longestSession:Math.round(i*10)/10,shortestSession:Math.round(d*10)/10,mostUsedProtocol:x,firstSessionDate:p,lastSessionDate:j}}function Ge(s,n){let t=[...s];if(n.status&&n.status!=="all"&&(t=t.filter(a=>a.status===n.status)),n.protocol&&(t=t.filter(a=>a.protocol_id===n.protocol)),n.dateRange){const a=q(n.dateRange.start).toISOString(),l=X(n.dateRange.end).toISOString();t=t.filter(c=>c.start_time>=a&&c.start_time<=l)}return n.minDuration!==void 0&&(t=t.filter(a=>a.actual_duration_hours&&a.actual_duration_hours>=n.minDuration)),n.maxDuration!==void 0&&(t=t.filter(a=>a.actual_duration_hours&&a.actual_duration_hours<=n.maxDuration)),t}function se(s=50,n={}){const{session:t}=A(),a=t?.user?.id;return B({queryKey:["fasting","history",a,s,n],queryFn:async()=>{if(!a)throw new Error("User not authenticated");f.debug("FASTING_HISTORY","Fetching fasting history",{userId:a,limit:s,filters:n,timestamp:new Date().toISOString()});let l=$.from("fasting_sessions").select("*").eq("user_id",a).order("start_time",{ascending:!1});s>0&&(l=l.limit(s));const{data:c,error:i}=await l;if(i)throw f.error("FASTING_HISTORY","Failed to fetch fasting history",{error:i.message,userId:a,timestamp:new Date().toISOString()}),i;const d=c||[],r=Ge(d,n),x=ze(r);return f.debug("FASTING_HISTORY","History fetched and processed",{userId:a,totalSessions:d.length,filteredSessions:r.length,stats:x,timestamp:new Date().toISOString()}),{sessions:r,allSessions:d,stats:x,filters:n}},enabled:!!a,staleTime:15*60*1e3,cacheTime:30*60*1e3,retry:1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,structuralSharing:!1})}function He(){const s=te(),{session:n}=A(),{showToast:t}=Y(),{success:a,error:l}=G();return ae({mutationFn:async c=>{if(!n?.user?.id)throw new Error("User not authenticated");f.info("FASTING_HISTORY","Deleting fasting session",{sessionId:c,userId:n.user.id,timestamp:new Date().toISOString()});const{error:i}=await $.from("fasting_sessions").delete().eq("id",c).eq("user_id",n.user.id);if(i)throw f.error("FASTING_HISTORY","Failed to delete session",{error:i.message,sessionId:c,userId:n.user.id,timestamp:new Date().toISOString()}),i;f.info("FASTING_HISTORY","Session deleted successfully",{sessionId:c,userId:n.user.id,timestamp:new Date().toISOString()})},onSuccess:()=>{s.invalidateQueries({queryKey:["fasting"]}),a(),t({type:"success",title:"Session supprimée",message:"La session de jeûne a été supprimée avec succès",duration:3e3})},onError:c=>{l(),t({type:"error",title:"Erreur de suppression",message:"Impossible de supprimer la session. Réessayez plus tard.",duration:4e3})}})}function qe(){const{session:s}=A(),n=s?.user?.id;return B({queryKey:["fasting","protocols",n],queryFn:async()=>{if(!n)throw new Error("User not authenticated");const{data:t,error:a}=await $.from("fasting_sessions").select("protocol_id").eq("user_id",n).not("protocol_id","is",null);if(a)throw a;return[...new Set((t||[]).map(c=>c.protocol_id))].filter(Boolean)},enabled:!!n,staleTime:10*60*1e3})}const Le=s=>{switch(s){case 7:return 3;case 30:return 8;case 90:return 20;default:return 3}};function K(s){switch(s){case 7:return"7 jours";case 30:return"30 jours";case 90:return"90 jours";default:return`${s} jours`}}const Ue=({selectedPeriod:s,onPeriodChange:n,availableSessionsCount:t=0,getMinSessionsForPeriod:a=Le,className:l=""})=>{const{click:c}=G(),{isPerformanceMode:i}=D(),d=[{value:7,label:K(7)},{value:30,label:K(30)},{value:90,label:K(90)}],r=x=>{const o=a(x),p=t>=o;return f.debug("FASTING_PERIOD_SELECTOR","Period availability check",{periodValue:x,availableSessionsCount:t,threshold:o,available:p,calculation:`${t} >= ${o} = ${p}`,timestamp:new Date().toISOString()}),p};return e.jsx("div",{className:`flex justify-center ${l}`,children:e.jsx("div",{className:"inline-flex gap-2 p-1 rounded-lg",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:i?"none":"blur(10px)"},children:d.map(x=>{const o=r(x.value),p=s===x.value,j="#10B981";return e.jsx("button",{onClick:()=>{if(o)c(),n(x.value),f.info("FASTING_PERIOD_SELECTOR","Period changed",{newPeriod:x.value,availableSessionsCount:t,timestamp:new Date().toISOString()});else{const b=a(x.value);f.warn("FASTING_PERIOD_SELECTOR","Attempted to select unavailable period",{period:x.value,availableSessionsCount:t,requiredSessions:b,missingSessions:b-t,timestamp:new Date().toISOString()})}},disabled:!o,className:"px-6 py-2.5 rounded-lg text-sm font-medium",style:{background:p?`${j}33`:"transparent",color:p?j:o?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.4)",border:p?`1px solid ${j}66`:"1px solid transparent",boxShadow:i?"none":p?`0 0 20px ${j}4D`:"none",opacity:o?1:.5,cursor:o?"pointer":"not-allowed",transition:i?"all 0.15s ease":"all 0.2s ease"},children:x.label},x.value)})})})},Ke=({className:s=""})=>{const{isPerformanceMode:n}=D(),t=n?"div":y.div;return e.jsxs("div",{className:`space-y-6 ${s}`,children:[e.jsx(t,{...!n&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},children:e.jsx(N,{className:"p-6 text-center",style:{background:`
              radial-gradient(circle at 30% 20%, color-mix(in srgb, #8B5CF6 15%, transparent) 0%, transparent 60%),
              radial-gradient(circle at 70% 80%, color-mix(in srgb, #A855F7 12%, transparent) 0%, transparent 50%),
              var(--glass-opacity)
            `,borderColor:"color-mix(in srgb, #8B5CF6 30%, transparent)",boxShadow:n?"0 8px 32px rgba(0, 0, 0, 0.3)":`
                0 16px 48px rgba(0, 0, 0, 0.3),
                0 0 40px color-mix(in srgb, #8B5CF6 25%, transparent),
                inset 0 2px 0 rgba(255, 255, 255, 0.2)
              `,backdropFilter:n?"none":"blur(24px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center",style:{background:`
                  radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                  linear-gradient(135deg, color-mix(in srgb, #8B5CF6 40%, transparent), color-mix(in srgb, #A855F7 30%, transparent))
                `,border:"3px solid color-mix(in srgb, #8B5CF6 60%, transparent)",boxShadow:n?"none":"0 0 40px color-mix(in srgb, #8B5CF6 60%, transparent)"},...!n&&{animate:{scale:[1,1.05,1],boxShadow:["0 0 40px color-mix(in srgb, #8B5CF6 60%, transparent)","0 0 60px color-mix(in srgb, #8B5CF6 80%, transparent)","0 0 40px color-mix(in srgb, #8B5CF6 60%, transparent)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}},children:e.jsx(h,{Icon:u.Lightbulb,size:40,style:{color:"#8B5CF6"},className:n?"":"animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Génération IA en Cours"}),e.jsx("p",{className:"text-white/80 text-lg",children:"GPT-5 mini analyse vos patterns de jeûne..."})]}),e.jsx("div",{className:"space-y-2 max-w-md mx-auto",children:["Récupération des sessions de jeûne","Analyse des patterns avec GPT-5 mini","Génération d'insights personnalisés","Mise en cache pour optimisation"].map((a,l)=>e.jsxs(t,{className:"flex items-center gap-3 p-2 rounded-lg bg-white/5",...!n&&{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:l*.2}},children:[e.jsx(t,{className:"w-2 h-2 rounded-full bg-purple-400",...!n&&{animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1.5,repeat:1/0,delay:l*.3}}}),e.jsx("span",{className:"text-white/70 text-sm",children:a})]},l))})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{...!n&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2}},children:e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-32 animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-3 bg-white/10 rounded w-full animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2 animate-pulse"})]})]})}),[1,2,3].map(a=>e.jsx(t,{...!n&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3+a*.1}},children:e.jsx(N,{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 animate-pulse flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-full animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-5/6 animate-pulse"})]}),e.jsx("div",{className:"h-8 bg-white/10 rounded w-32 animate-pulse"})]})]})})},a))]}),e.jsx(t,{...!n&&{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:1}},className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-purple-500/10 border border-purple-400/20",children:[e.jsx(t,{className:"w-2 h-2 rounded-full bg-purple-400",...!n&&{animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1,repeat:1/0}}}),e.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"Génération IA en cours... (~15-45 secondes)"})]})})]})};function Ve(s,n){switch(s){case"positive":return{color:"#22C55E",icon:"Check",badge:"Excellent",description:"Performance exceptionnelle"};case"encouraging":return{color:"#F59E0B",icon:"TrendingUp",badge:"En progression",description:"Vous êtes sur la bonne voie"};case"neutral":default:return{color:"#06B6D4",icon:"Target",badge:"Stable",description:"Continuez vos efforts"}}}const We=({summary:s,periodDays:n,aiModel:t,tokensUsed:a,cached:l,className:c=""})=>{const{isPerformanceMode:i}=D(),d=i?"div":y.div,r=Ve(s.sentiment,s.overallScore);return e.jsx(d,{...!i&&{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:[.25,.1,.25,1]}},className:c,children:e.jsx(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${r.color} 15%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, ${r.color} 10%, transparent) 0%, transparent 50%),
            var(--glass-opacity)
          `,borderColor:`color-mix(in srgb, ${r.color} 30%, transparent)`,boxShadow:i?"0 8px 32px rgba(0, 0, 0, 0.3)":`
              0 16px 48px rgba(0, 0, 0, 0.3),
              0 0 40px color-mix(in srgb, ${r.color} 25%, transparent),
              inset 0 2px 0 rgba(255, 255, 255, 0.2)
            `,backdropFilter:i?"none":"blur(24px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${i?"":"breathing-icon"}`,style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                    linear-gradient(135deg, color-mix(in srgb, ${r.color} 40%, transparent), color-mix(in srgb, ${r.color} 30%, transparent))
                  `,border:`2px solid color-mix(in srgb, ${r.color} 60%, transparent)`,boxShadow:i?"none":`0 0 25px color-mix(in srgb, ${r.color} 50%, transparent)`},children:e.jsx(h,{Icon:u[r.icon],size:20,style:{color:r.color},variant:"pure"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Analyse de la Forge Temporelle"}),e.jsxs("p",{className:"text-white/80 text-sm mt-0.5",children:[n," derniers jours • ",r.description]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:r.color,boxShadow:`0 0 8px ${r.color}60`}}),e.jsx("span",{className:"text-white font-bold text-2xl",children:s.overallScore})]}),e.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{background:`color-mix(in srgb, ${r.color} 15%, transparent)`,color:r.color},children:r.badge})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(h,{Icon:u.Search,size:16,style:{color:r.color}}),"Découvertes Clés"]}),e.jsx("div",{className:"space-y-2",children:s.keyFindings.map((x,o)=>e.jsxs(d,{className:"flex items-center gap-3 p-3 rounded-lg",style:{background:`color-mix(in srgb, ${r.color} 8%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 20%, transparent)`},...!i&&{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2+o*.1}},children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:r.color}}),e.jsx("span",{className:"text-white/85 text-sm leading-relaxed",children:x})]},o))})]}),e.jsx(d,{className:"p-5 rounded-xl",style:{background:`
                radial-gradient(circle at 30% 20%, color-mix(in srgb, ${r.color} 12%, transparent) 0%, transparent 60%),
                color-mix(in srgb, ${r.color} 6%, transparent)
              `,border:`2px solid color-mix(in srgb, ${r.color} 25%, transparent)`,boxShadow:i?"0 8px 32px rgba(0, 0, 0, 0.3)":`
                  0 8px 32px rgba(0, 0, 0, 0.2),
                  0 0 20px color-mix(in srgb, ${r.color} 20%, transparent),
                  inset 0 1px 0 rgba(255, 255, 255, 0.15)
                `},...!i&&{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.5}},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{background:`color-mix(in srgb, ${r.color} 20%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 30%, transparent)`},children:e.jsx(h,{Icon:u.Lightbulb,size:14,style:{color:r.color}})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold mb-2",style:{color:r.color},children:"Recommandation Principale"}),e.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:s.mainRecommendation})]})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-white/50 pt-2 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.Calendar,size:10}),e.jsxs("span",{children:["Période : ",n," jours"]})]}),t&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.Zap,size:10}),e.jsx("span",{children:t})]}),a&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.Activity,size:10}),e.jsxs("span",{children:[a," tokens"]})]}),l&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.Shield,size:10}),e.jsx("span",{children:"Mis en cache"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.Clock,size:10}),e.jsx("span",{children:"Mis à jour maintenant"})]})]})]})})})};function Ye(s){switch(s){case"high":return{borderWidth:"2px",glowIntensity:"25%",backgroundIntensity:"12%"};case"medium":return{borderWidth:"1.5px",glowIntensity:"20%",backgroundIntensity:"10%"};case"low":default:return{borderWidth:"1px",glowIntensity:"15%",backgroundIntensity:"8%"}}}function Qe(s,n){return{pattern:"BarChart3",recommendation:"Lightbulb",achievement:"Check",warning:"AlertTriangle"}[s]||n||"Info"}const Je=({insight:s,index:n,className:t=""})=>{const{isPerformanceMode:a}=D(),l=a?"div":y.div,c=Ye(s.priority),i=Qe(s.type,s.icon);return e.jsx(l,{...!a&&{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:n*.1,ease:[.25,.1,.25,1]}},className:t,children:e.jsxs(N,{className:"p-5 hover:scale-[1.01] transition-transform duration-200",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${s.color} ${c.backgroundIntensity}, transparent) 0%, transparent 60%),
            var(--glass-opacity)
          `,borderColor:`color-mix(in srgb, ${s.color} 25%, transparent)`,borderWidth:c.borderWidth,boxShadow:a?"0 8px 32px rgba(0, 0, 0, 0.3)":`
              0 8px 32px rgba(0, 0, 0, 0.2),
              0 0 20px color-mix(in srgb, ${s.color} ${c.glowIntensity}, transparent),
              inset 0 1px 0 rgba(255, 255, 255, 0.12)
            `,backdropFilter:a?"none":"blur(16px) saturate(150%)"},children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",style:{background:`
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
                linear-gradient(135deg, color-mix(in srgb, ${s.color} 35%, transparent), color-mix(in srgb, ${s.color} 25%, transparent))
              `,border:`${c.borderWidth} solid color-mix(in srgb, ${s.color} 50%, transparent)`,boxShadow:a?"none":`0 0 20px color-mix(in srgb, ${s.color} 30%, transparent)`},children:e.jsx(h,{Icon:u[i],size:20,style:{color:s.color},variant:"pure"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:s.title}),e.jsx("div",{className:"px-2 py-1 rounded-full flex-shrink-0",style:{background:`color-mix(in srgb, ${s.color} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${s.color} 25%, transparent)`},children:e.jsx("span",{className:"text-xs font-medium",style:{color:s.color},children:s.priority==="high"?"Priorité":s.priority==="medium"?"Important":"Info"})})]}),e.jsx("p",{className:"text-white/85 text-sm leading-relaxed mb-4",children:s.content}),s.actionable&&e.jsx(l,{className:"p-3 rounded-lg",style:{background:`color-mix(in srgb, ${s.color} 8%, transparent)`,border:`1px solid color-mix(in srgb, ${s.color} 20%, transparent)`},...!a&&{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2+n*.1}},children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(h,{Icon:u.Target,size:12,style:{color:s.color},className:"mt-0.5"}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-sm mb-1",style:{color:s.color},children:"Action Recommandée"}),e.jsx("p",{className:"text-white/80 text-xs leading-relaxed",children:s.actionable})]})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{background:s.color}}),e.jsx("span",{className:"text-white/60 text-xs font-medium",children:s.type==="pattern"?"Pattern détecté":s.type==="recommendation"?"Recommandation":s.type==="achievement"?"Accomplissement":"Attention"})]}),e.jsxs("div",{className:"text-white/40 text-xs",children:["Insight #",n+1]})]})]})})},Xe=s=>{switch(s){case 7:return 3;case 30:return 8;case 90:return 20;default:return 3}},Ze=()=>{const{profile:s}=A(),{showModal:n}=be(),{showToast:t}=Y(),{isPerformanceMode:a}=D(),l=z(),[c,i]=H.useState(7),d=a?"div":y.div,{data:r}=se(100,{dateRange:{start:new Date(Date.now()-c*24*60*60*1e3),end:new Date}}),x=r?.sessions?.filter(m=>m.status==="completed").length||0,{data:o,isLoading:p,error:j}=Be(c),b=W(({currentLocation:m,nextLocation:g})=>p&&m.pathname!==g.pathname&&!o?.cached);return _.useEffect(()=>{b.state==="blocked"&&n({title:"Quitter la génération IA en cours ?",message:"La Forge Spatiale génère vos insights personnalisés avec GPT-5 mini. Quitter maintenant annulera l'analyse et pourrait engendrer des coûts sans résultat.",processName:"Génération IA",onConfirm:()=>{b.proceed()},onCancel:()=>{b.reset()}})},[b,n]),e.jsxs(d,{...!a&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},className:"space-y-6",children:[e.jsx(Ue,{selectedPeriod:c,onPeriodChange:i,availableSessionsCount:x,getMinSessionsForPeriod:Xe}),p&&e.jsx(Ke,{}),j&&e.jsx(N,{className:"p-6",style:{background:"color-mix(in srgb, #EF4444 8%, transparent)",borderColor:"color-mix(in srgb, #EF4444 20%, transparent)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center",children:e.jsx(h,{Icon:u.AlertCircle,size:16,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-300 font-semibold",children:"Erreur d'Analyse"}),e.jsx("p",{className:"text-red-200 text-sm",children:"Impossible de générer les insights. Réessayez dans quelques instants."})]})]})}),o&&!p&&o.insights.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(We,{summary:o.summary,periodDays:c,aiModel:o.aiModel,tokensUsed:o.tokensUsed,cached:o.cached}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[e.jsx(h,{Icon:u.Lightbulb,size:18,className:"text-green-400"}),"Insights Détaillés (",o.insights.length,")"]}),e.jsx("div",{className:"space-y-4",children:o.insights.map((m,g)=>e.jsx(Je,{insight:m,index:g},m.id))})]})]}),o&&o.insights.length===0&&!p&&e.jsx(N,{className:"p-8 text-center",style:{background:`
            radial-gradient(ellipse at center,
              rgba(16, 185, 129, 0.15) 0%,
              rgba(52, 211, 153, 0.08) 50%,
              rgba(0, 0, 0, 0.4) 100%)
          `,borderColor:"color-mix(in srgb, #10B981 30%, transparent)",boxShadow:`
            0 0 30px rgba(16, 185, 129, 0.2),
            0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.1)
          `,backdropFilter:"blur(20px) saturate(1.2)"},children:e.jsxs("div",{className:"space-y-6 flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                  rgba(16, 185, 129, 0.3) 0%,
                  rgba(52, 211, 153, 0.15) 70%,
                  transparent 100%)`,border:"1px solid rgba(16, 185, 129, 0.4)",boxShadow:`
                  0 0 25px rgba(16, 185, 129, 0.3),
                  0 4px 20px rgba(0, 0, 0, 0.2),
                  inset 0 1px 0 rgba(255, 255, 255, 0.2)
                `},children:e.jsx(h,{Icon:u.Lightbulb,size:48,className:"text-green-400",style:{filter:`drop-shadow(0 0 12px rgba(16, 185, 129, 0.8))
                           drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3))`}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Insights en Construction"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Plus de sessions nécessaires pour l'analyse IA"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 my-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                      rgba(16, 185, 129, 0.3) 0%,
                      rgba(52, 211, 153, 0.1) 70%,
                      transparent 100%)`,border:"1px solid rgba(16, 185, 129, 0.4)",boxShadow:`
                      0 0 20px rgba(16, 185, 129, 0.3),
                      0 4px 15px rgba(0, 0, 0, 0.2),
                      inset 0 1px 0 rgba(255, 255, 255, 0.2)
                    `},children:e.jsx(h,{Icon:u.Brain,size:24,className:"text-green-400",style:{filter:`drop-shadow(0 0 8px rgba(16, 185, 129, 0.6))
                               drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Analyse IA Personnalisée"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Découvrez vos patterns de jeûne grâce à l'intelligence artificielle"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                      rgba(16, 185, 129, 0.3) 0%,
                      rgba(52, 211, 153, 0.1) 70%,
                      transparent 100%)`,border:"1px solid rgba(16, 185, 129, 0.4)",boxShadow:`
                      0 0 20px rgba(16, 185, 129, 0.3),
                      0 4px 15px rgba(0, 0, 0, 0.2),
                      inset 0 1px 0 rgba(255, 255, 255, 0.2)
                    `},children:e.jsx(h,{Icon:u.TrendingUp,size:24,className:"text-green-400",style:{filter:`drop-shadow(0 0 8px rgba(16, 185, 129, 0.6))
                               drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Recommandations Avancées"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Obtenez des conseils adaptés à vos objectifs et votre métabolisme"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                      rgba(16, 185, 129, 0.3) 0%,
                      rgba(52, 211, 153, 0.1) 70%,
                      transparent 100%)`,border:"1px solid rgba(16, 185, 129, 0.4)",boxShadow:`
                      0 0 20px rgba(16, 185, 129, 0.3),
                      0 4px 15px rgba(0, 0, 0, 0.2),
                      inset 0 1px 0 rgba(255, 255, 255, 0.2)
                    `},children:e.jsx(h,{Icon:u.Target,size:24,className:"text-green-400",style:{filter:`drop-shadow(0 0 8px rgba(16, 185, 129, 0.6))
                               drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Optimisation Continue"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Affinez votre pratique avec des insights évoluant avec vos progrès"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:()=>l("/fasting/input"),className:"group relative px-8 py-4 text-white font-semibold rounded-2xl transform hover:scale-105 transition-all duration-300",style:{background:`linear-gradient(135deg,
                    rgba(16, 185, 129, 0.8) 0%,
                    rgba(52, 211, 153, 0.9) 100%)`,border:"2px solid rgba(16, 185, 129, 0.6)",boxShadow:`
                    0 0 30px rgba(16, 185, 129, 0.4),
                    0 8px 25px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2),
                    inset 0 -1px 0 rgba(0, 0, 0, 0.2)
                  `,backdropFilter:"blur(10px) saturate(1.2)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{Icon:u.Timer,size:24,className:"group-hover:rotate-12 transition-transform duration-300",style:{color:"white",filter:`drop-shadow(0 0 10px rgba(16, 185, 129, 0.8))
                               drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3))`}}),e.jsx("span",{className:"text-lg",children:"Ajouter des Sessions de Jeûne"})]}),e.jsx("div",{className:"absolute inset-0 rounded-2xl blur-xl opacity-50 group-hover:opacity-75 transition-opacity duration-300 -z-10",style:{background:`linear-gradient(135deg,
                      rgba(16, 185, 129, 0.6) 0%,
                      rgba(52, 211, 153, 0.6) 100%)`}})]})}),e.jsx("div",{className:"text-white/50 text-sm p-3 rounded-xl",style:{background:`radial-gradient(ellipse at center,
                  rgba(16, 185, 129, 0.1) 0%,
                  transparent 70%)`,border:"1px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 0 15px rgba(16, 185, 129, 0.1)"},children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(h,{Icon:u.Info,size:16,className:"text-green-400",style:{filter:"drop-shadow(0 0 6px rgba(16, 185, 129, 0.6))"}}),e.jsx("span",{children:"Plus vous enregistrez de sessions, plus les insights deviennent précis et personnalisés !"})]})})]})})]})};function es(s){if(s.length===0)return{totalSessions:0,totalFastedHours:0,averageDuration:0,longestFast:0,bestStreak:0,currentStreak:0,successRate:0,consistencyScore:0};const n=s.filter(m=>m.status==="completed"&&m.actual_duration_hours),t=n.reduce((m,g)=>m+(g.actual_duration_hours||0),0),a=n.length>0?t/n.length:0,l=Math.max(0,...n.map(m=>m.actual_duration_hours||0)),c=n.filter(m=>m.actual_duration_hours&&m.target_hours&&m.actual_duration_hours/m.target_hours>=.9),i=n.length>0?c.length/n.length*100:0,d=n.map(m=>{try{const g=I(m.start_time);return R(g)?S(g,"yyyy-MM-dd"):(f.warn("FASTING_PROGRESSION_METRICS","Invalid date in session",{sessionId:m.id,startTime:m.start_time,timestamp:new Date().toISOString()}),null)}catch(g){return f.error("FASTING_PROGRESSION_METRICS","Date parsing error",{sessionId:m.id,startTime:m.start_time,error:g instanceof Error?g.message:"Unknown error",timestamp:new Date().toISOString()}),null}}).filter(m=>m!==null),r=[...new Set(d)].sort();let x=0,o=0,p=0;for(let m=0;m<r.length;m++)m===0||(()=>{try{const g=I(r[m]),v=I(r[m-1]);return!R(g)||!R(v)?!1:g.getTime()-v.getTime()===24*60*60*1e3}catch{return!1}})()?p++:(o=Math.max(o,p),p=1);o=Math.max(o,p);const j=S(new Date,"yyyy-MM-dd");if(r.includes(j)){x=1;for(let m=r.length-2;m>=0;m--)try{const g=I(r[m+1]),v=I(r[m]);if(!R(g)||!R(v))break;if((g.getTime()-v.getTime())/(24*60*60*1e3)===1)x++;else break}catch{break}}const b=Math.round(i*.7+Math.min(100,r.length/30*100)*.3);return{totalSessions:s.length,totalFastedHours:Math.round(t*10)/10,averageDuration:Math.round(a*10)/10,longestFast:Math.round(l*10)/10,bestStreak:o,currentStreak:x,successRate:Math.round(i),consistencyScore:b}}function ss(s,n){const t=new Date,a=L(t,n-1);return Z({start:a,end:t}).map(c=>{const i=S(c,"yyyy-MM-dd"),d=s.filter(p=>{try{const j=I(p.start_time);return R(j)?S(j,"yyyy-MM-dd")===i&&p.status==="completed":(f.warn("FASTING_PROGRESSION_CONSISTENCY","Invalid session date",{sessionId:p.id,startTime:p.start_time,timestamp:new Date().toISOString()}),!1)}catch(j){return f.error("FASTING_PROGRESSION_CONSISTENCY","Date filtering error",{sessionId:p.id,startTime:p.start_time,error:j instanceof Error?j.message:"Unknown error",timestamp:new Date().toISOString()}),!1}}),r=d.reduce((p,j)=>p+(j.actual_duration_hours||0),0),x=d.length>0?r/d.length:0;let o="none";if(d.length>0){const p=d.reduce((j,b)=>b.actual_duration_hours&&b.target_hours?j+b.actual_duration_hours/b.target_hours:j,0)/d.length;p>=.9?o="success":p>=.5?o="partial":o="missed"}return{date:i,hasFasted:d.length>0,totalHours:Math.round(r*10)/10,sessionsCount:d.length,averageDuration:Math.round(x*10)/10,outcome:o}})}function ts(s,n){const t=new Date,a=L(t,n-1);return Z({start:a,end:t}).map(c=>{const i=S(c,"yyyy-MM-dd"),d=s.filter(o=>{try{const p=I(o.start_time);return R(p)?S(p,"yyyy-MM-dd")===i&&o.status==="completed":(f.warn("FASTING_PROGRESSION_TRENDS","Invalid session date",{sessionId:o.id,startTime:o.start_time,timestamp:new Date().toISOString()}),!1)}catch(p){return f.error("FASTING_PROGRESSION_TRENDS","Date filtering error",{sessionId:o.id,startTime:o.start_time,error:p instanceof Error?p.message:"Unknown error",timestamp:new Date().toISOString()}),!1}}),r=d.reduce((o,p)=>o+(p.actual_duration_hours||0),0),x=d.length>0?r/d.length:0;return{date:i,averageDuration:Math.round(x*10)/10,sessionsCount:d.length,totalHours:Math.round(r*10)/10}})}function as(s,n,t){const a=[];f.debug("FASTING_PROGRESSION_AI_DATA_CHECK_DETAILED","Checking minimum data requirements with full details",{profileExists:!!s,sessionsCount:n,periodDays:t,profileData:s?{weight_kg:s.weight_kg,height_cm:s.height_cm,objective:s.objective,activity_level:s.activity_level,sex:s.sex,hasEmotions:!!s.emotions,hasNutrition:!!s.nutrition}:null,timestamp:new Date().toISOString()}),s?.weight_kg||a.push("Poids corporel"),s?.height_cm||a.push("Taille"),s?.objective||a.push("Objectif fitness"),s?.activity_level||a.push("Niveau d'activité");const l=t===7?5:t===30?12:20;return n<l&&a.push(`Au moins ${l} sessions pour l'analyse IA`),f.debug("FASTING_PROGRESSION_AI_DATA_CHECK_RESULT","Minimum data check result (NO BYPASS)",{sufficient:a.length===0,missingDataCount:a.length,missingData:a,minSessionsRequired:l,actualSessions:n,willCallEdgeFunction:a.length===0,timestamp:new Date().toISOString()}),{sufficient:a.length===0,missingData:a}}function rs(s=30){const{session:n,profile:t}=A(),a=n?.user?.id;return _.useEffect(()=>{f.debug("FASTING_PROGRESSION_HOOK_INIT","Hook initialized",{userId:a,periodDays:s,hasProfile:!!t,timestamp:new Date().toISOString()})},[a,s,t]),B({queryKey:["fasting","progression",a,s],queryFn:async()=>{if(f.debug("FASTING_PROGRESSION_QUERY_START","Query function started",{userId:a,periodDays:s,timestamp:new Date().toISOString()}),!a)throw f.error("FASTING_PROGRESSION_QUERY_ERROR","User not authenticated",{userId:a,timestamp:new Date().toISOString()}),new Error("User not authenticated");const l=q(L(new Date,s)).toISOString(),c=new Date().toISOString();f.debug("FASTING_PROGRESSION","Fetching progression data",{userId:a,periodDays:s,startDate:l,endDate:c,timestamp:new Date().toISOString()});const{data:i,error:d}=await $.from("fasting_sessions").select("*").eq("user_id",a).gte("start_time",l).lte("start_time",c).order("start_time",{ascending:!0});if(d)throw f.error("FASTING_PROGRESSION","Failed to fetch progression data",{error:d.message,userId:a,periodDays:s,timestamp:new Date().toISOString()}),d;const r=i||[];f.debug("FASTING_PROGRESSION_SESSIONS_DATA_DETAILED","Sessions fetched for progression with full details",{userId:a,periodDays:s,totalSessions:r.length,completedSessions:r.filter(w=>w.status==="completed").length,startDate:l,endDate:c,sessionsData:r.map(w=>({id:w.id,start_time:w.start_time,status:w.status,target_hours:w.target_hours,actual_duration_hours:w.actual_duration_hours,protocol_id:w.protocol_id})),timestamp:new Date().toISOString()});const x=es(r),o=ss(r,s),p=ts(r,s);f.debug("FASTING_PROGRESSION_METRICS_CALCULATED","Metrics calculated from sessions",{userId:a,periodDays:s,metrics:{totalSessions:x.totalSessions,totalFastedHours:x.totalFastedHours,averageDuration:x.averageDuration,successRate:x.successRate,consistencyScore:x.consistencyScore},timestamp:new Date().toISOString()});let j="insufficient";const b=r.filter(w=>w.status==="completed");b.length>=20?j="excellent":b.length>=10?j="good":b.length>=3&&(j="limited");const m=as(t,b.length,s);f.debug("FASTING_PROGRESSION_AI_DATA_CHECK_FINAL","AI data check result with bypass state",{userId:a,periodDays:s,completedSessions:b.length,aiDataCheckSufficient:m.sufficient,missingData:m.missingData,willProceedToEdgeFunction:m.sufficient,profileData:{hasWeightKg:!!t?.weight_kg,hasHeightCm:!!t?.height_cm,hasObjective:!!t?.objective,hasActivityLevel:!!t?.activity_level},timestamp:new Date().toISOString()});let g,v,F,k;if(m.sufficient)try{const w={userId:a,periodDays:s,profile:{weight_kg:t?.weight_kg,height_cm:t?.height_cm,objective:t?.objective,activity_level:t?.activity_level,sex:t?.sex,birthdate:t?.birthdate,emotions:t?.emotions,nutrition:t?.nutrition}};f.debug("FASTING_PROGRESSION_EDGE_CALL_PAYLOAD_DETAILED","About to call Edge Function with full payload",{userId:a,periodDays:s,profileComplete:{hasWeightKg:!!t?.weight_kg,weightKg:t?.weight_kg,hasHeightCm:!!t?.height_cm,heightCm:t?.height_cm,hasObjective:!!t?.objective,objective:t?.objective,hasActivityLevel:!!t?.activity_level,activityLevel:t?.activity_level,hasSex:!!t?.sex,sex:t?.sex},payloadSize:JSON.stringify(w).length,timestamp:new Date().toISOString()}),f.debug("FASTING_PROGRESSION_AI","Calling AI progression analyzer Edge Function",{userId:a,periodDays:s,completedSessions:b.length,profileKeys:t?Object.keys(t):[],edgeFunctionName:"fasting-progression-analyzer",timestamp:new Date().toISOString()});const{data:C,error:M}=await $.functions.invoke("fasting-progression-analyzer",{body:w});f.debug("FASTING_PROGRESSION_EDGE_RESPONSE","Edge Function response received",{userId:a,periodDays:s,hasResponse:!!C,hasError:!!M,errorMessage:M?.message,errorDetails:M?.details,responseKeys:C?Object.keys(C):[],responseType:typeof C,edgeFunctionCallCompleted:!0,timestamp:new Date().toISOString()}),M?f.error("FASTING_PROGRESSION_AI","AI progression analysis failed",{error:M.message,errorDetails:M.details,errorCode:M.code,userId:a,periodDays:s,timestamp:new Date().toISOString()}):(C&&typeof C=="object"?(g=C.aiAnalysis,v=C.aiModel,F=C.tokensUsed,k=C.cached,f.debug("FASTING_PROGRESSION_AI_SUCCESS","AI analysis extracted from response",{userId:a,periodDays:s,hasAiAnalysis:!!g,aiModel:v,tokensUsed:F,cached:k,timestamp:new Date().toISOString()})):f.warn("FASTING_PROGRESSION_AI","Invalid AI response format",{userId:a,periodDays:s,responseType:typeof C,responseValue:C,timestamp:new Date().toISOString()}),f.debug("FASTING_PROGRESSION_AI","AI progression analysis completed",{userId:a,periodDays:s,tokensUsed:F,cached:k,aiModel:v,timestamp:new Date().toISOString()}))}catch(w){f.error("FASTING_PROGRESSION_AI","AI progression analysis exception",{error:w instanceof Error?w.message:"Unknown error",errorStack:w instanceof Error?w.stack:void 0,userId:a,periodDays:s,timestamp:new Date().toISOString()})}else f.warn("FASTING_PROGRESSION_AI","Insufficient data for AI progression analysis - showing local metrics only",{userId:a,periodDays:s,completedSessions:b.length,missingData:m.missingData,aiDataCheckSufficient:m.sufficient,reasonForSkipping:"aiDataCheck.sufficient === false",willShowLocalMetrics:!0,localMetricsAvailable:x.totalSessions>0,timestamp:new Date().toISOString()});f.debug("FASTING_PROGRESSION_METRICS_CALCULATED","Metrics calculated",{userId:a,periodDays:s,metrics:{totalSessions:x.totalSessions,totalFastedHours:x.totalFastedHours,averageDuration:x.averageDuration,successRate:x.successRate,consistencyScore:x.consistencyScore},timestamp:new Date().toISOString()});const P={metrics:x,aiAnalysis:g,consistencyData:o,durationTrends:p,heatmapData:o,dataQuality:j,analysisDate:new Date().toISOString(),periodDays:s,aiModel:v,tokensUsed:F,cached:k};return f.debug("FASTING_PROGRESSION_FINAL","Progression data ready - metrics available",{userId:a,periodDays:s,hasMetrics:!!x,metricsSessionsCount:x.totalSessions,metricsTotalHours:x.totalFastedHours,metricsAvgDuration:x.averageDuration,metricsConsistencyScore:x.consistencyScore,hasAiAnalysis:!!g,dataQuality:j,willDisplayLocalMetrics:x.totalSessions>0,metricsKeys:Object.keys(x),consistencyDataLength:o.length,timestamp:new Date().toISOString()}),f.debug("FASTING_PROGRESSION_AI_DATA_CHECK","AI data check result",{periodDays:s,totalSessions:r.length,completedSessions:b.length,willProceedToEdgeFunction:m.sufficient,dataQuality:j,metrics:{totalFastedHours:x.totalFastedHours,successRate:x.successRate,currentStreak:x.currentStreak},hasAiAnalysis:!!g,aiModel:v,tokensUsed:F,cached:k,timestamp:new Date().toISOString()}),P},enabled:!!a,staleTime:15*60*1e3,gcTime:30*60*1e3,retry:1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,structuralSharing:!1})}const ns=({className:s=""})=>e.jsxs("div",{className:`space-y-6 ${s}`,children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsx(N,{className:"p-6 text-center",style:{background:`
              radial-gradient(circle at 30% 20%, color-mix(in srgb, #06B6D4 15%, transparent) 0%, transparent 60%),
              radial-gradient(circle at 70% 80%, color-mix(in srgb, #3B82F6 12%, transparent) 0%, transparent 50%),
              var(--glass-opacity)
            `,borderColor:"color-mix(in srgb, #06B6D4 30%, transparent)",boxShadow:`
              0 16px 48px rgba(0, 0, 0, 0.3),
              0 0 40px color-mix(in srgb, #06B6D4 25%, transparent),
              inset 0 2px 0 rgba(255, 255, 255, 0.2)
            `,backdropFilter:"blur(24px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(y.div,{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center",style:{background:`
                  radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                  linear-gradient(135deg, color-mix(in srgb, #06B6D4 40%, transparent), color-mix(in srgb, #3B82F6 30%, transparent))
                `,border:"3px solid color-mix(in srgb, #06B6D4 60%, transparent)",boxShadow:`
                  0 0 40px color-mix(in srgb, #06B6D4 60%, transparent),
                  0 0 80px color-mix(in srgb, #06B6D4 40%, transparent)
                `},animate:{scale:[1,1.05,1],boxShadow:["0 0 40px color-mix(in srgb, #06B6D4 60%, transparent)","0 0 60px color-mix(in srgb, #06B6D4 80%, transparent)","0 0 40px color-mix(in srgb, #06B6D4 60%, transparent)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(h,{Icon:u.BarChart3,size:40,style:{color:"#06B6D4"},className:"animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Analyse IA de Progression"}),e.jsx("p",{className:"text-white/80 text-lg",children:"GPT-5 mini analyse vos données de progression..."})]}),e.jsx("div",{className:"space-y-2 max-w-md mx-auto",children:["Collecte des sessions de jeûne","Calcul des métriques de progression","Analyse narrative avec GPT-5 mini","Génération des recommandations IA"].map((n,t)=>e.jsxs(y.div,{className:"flex items-center gap-3 p-2 rounded-lg bg-white/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:t*.2},children:[e.jsx(y.div,{className:"w-2 h-2 rounded-full bg-cyan-400",animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1.5,repeat:1/0,delay:t*.3}}),e.jsx("span",{className:"text-white/70 text-sm",children:n})]},t))})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-5 bg-white/10 rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-32 animate-pulse"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(n=>e.jsxs("div",{className:"text-center p-4 rounded-xl bg-white/5",children:[e.jsx("div",{className:"h-8 bg-white/10 rounded w-16 mx-auto mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-20 mx-auto animate-pulse"})]},n))}),e.jsx("div",{className:"h-20 bg-white/10 rounded-xl animate-pulse"})]})}),[1,2].map(n=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3+n*.1},children:e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-40 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-24 animate-pulse"})]})]}),e.jsx("div",{className:"h-32 bg-white/10 rounded-xl animate-pulse mb-4"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(t=>e.jsx("div",{className:"h-3 bg-white/10 rounded animate-pulse"},t))})]})},n))]}),e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:1},className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-cyan-500/10 border border-cyan-400/20",children:[e.jsx(y.div,{className:"w-2 h-2 rounded-full bg-cyan-400",animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1,repeat:1/0}}),e.jsx("span",{className:"text-cyan-300 text-sm font-medium",children:"Analyse IA en cours... (~20-60 secondes)"})]})})]});function is(s){return s>=80?{color:"#22C55E",icon:"Check",badge:"Excellent",description:"Performance exceptionnelle"}:s>=60?{color:"#F59E0B",icon:"TrendingUp",badge:"Bien",description:"Bonne progression"}:s>=40?{color:"#06B6D4",icon:"Target",badge:"Modéré",description:"En développement"}:{color:"#10B981",icon:"Timer",badge:"Débutant",description:"Commencez votre forge"}}const os=({metrics:s,periodDays:n,aiAnalysis:t,aiModel:a,tokensUsed:l,cached:c,className:i=""})=>{const{isPerformanceMode:d}=D();d||y.div;const r=is(s.consistencyScore);return e.jsx(y.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:[.25,.1,.25,1]},className:i,children:e.jsx(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${r.color} 15%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, ${r.color} 10%, transparent) 0%, transparent 50%),
            var(--glass-opacity)
          `,borderColor:`color-mix(in srgb, ${r.color} 30%, transparent)`,boxShadow:`
            0 16px 48px rgba(0, 0, 0, 0.3),
            0 0 40px color-mix(in srgb, ${r.color} 25%, transparent),
            inset 0 2px 0 rgba(255, 255, 255, 0.2)
          `,backdropFilter:"blur(24px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center breathing-icon",style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                    linear-gradient(135deg, color-mix(in srgb, ${r.color} 40%, transparent), color-mix(in srgb, ${r.color} 30%, transparent))
                  `,border:`2px solid color-mix(in srgb, ${r.color} 60%, transparent)`,boxShadow:`0 0 25px color-mix(in srgb, ${r.color} 50%, transparent)`},children:e.jsx(h,{Icon:u[r.icon],size:20,style:{color:r.color},variant:"pure"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Progression Temporelle"}),e.jsxs("p",{className:"text-white/80 text-sm mt-0.5",children:[n," derniers jours • ",r.description]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:r.color,boxShadow:`0 0 8px ${r.color}60`}}),e.jsx("span",{className:"text-white font-bold text-2xl",children:s.consistencyScore})]}),e.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{background:`color-mix(in srgb, ${r.color} 15%, transparent)`,color:r.color},children:r.badge})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(y.div,{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #3B82F6 10%, transparent)",border:"1px solid color-mix(in srgb, #3B82F6 20%, transparent)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:s.totalSessions}),e.jsx("div",{className:"text-blue-300 text-sm font-medium",children:"Sessions"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Total"})]}),e.jsxs(y.div,{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #F59E0B 10%, transparent)",border:"1px solid color-mix(in srgb, #F59E0B 20%, transparent)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-400 mb-1",children:[s.totalFastedHours,"h"]}),e.jsx("div",{className:"text-orange-300 text-sm font-medium",children:"Temps Total"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Jeûné"})]}),e.jsxs(y.div,{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #10B981 10%, transparent)",border:"1px solid color-mix(in srgb, #10B981 20%, transparent)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-1",children:[s.averageDuration,"h"]}),e.jsx("div",{className:"text-green-300 text-sm font-medium",children:"Moyenne"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Durée"})]}),e.jsxs(y.div,{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #EF4444 10%, transparent)",border:"1px solid color-mix(in srgb, #EF4444 20%, transparent)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.4},children:[e.jsxs("div",{className:"text-2xl font-bold text-red-400 mb-1",children:[s.longestFast,"h"]}),e.jsx("div",{className:"text-red-300 text-sm font-medium",children:"Record"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Personnel"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(y.div,{className:"p-4 rounded-xl",style:{background:`color-mix(in srgb, ${r.color} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 20%, transparent)`},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:`color-mix(in srgb, ${r.color} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 25%, transparent)`},children:e.jsx(h,{Icon:u.Zap,size:16,style:{color:r.color}})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:s.currentStreak}),e.jsx("div",{className:"text-white/70 text-sm",children:"Série Actuelle"}),e.jsx("div",{className:"text-white/50 text-xs",children:"Jours consécutifs"})]})]})}),e.jsx(y.div,{className:"p-4 rounded-xl",style:{background:"color-mix(in srgb, #10B981 10%, transparent)",border:"1px solid color-mix(in srgb, #10B981 20%, transparent)"},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:"color-mix(in srgb, #10B981 15%, transparent)",border:"1px solid color-mix(in srgb, #10B981 25%, transparent)"},children:e.jsx(h,{Icon:u.Star,size:16,style:{color:"#10B981"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:s.bestStreak}),e.jsx("div",{className:"text-white/70 text-sm",children:"Meilleure Série"}),e.jsx("div",{className:"text-white/50 text-xs",children:"Record personnel"})]})]})}),e.jsx(y.div,{className:"p-4 rounded-xl",style:{background:"color-mix(in srgb, #22C55E 10%, transparent)",border:"1px solid color-mix(in srgb, #22C55E 20%, transparent)"},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:"color-mix(in srgb, #22C55E 15%, transparent)",border:"1px solid color-mix(in srgb, #22C55E 25%, transparent)"},children:e.jsx(h,{Icon:u.Target,size:16,style:{color:"#22C55E"}})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[s.successRate,"%"]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Taux de Succès"}),e.jsx("div",{className:"text-white/50 text-xs",children:"Objectifs atteints"})]})]})})]}),e.jsxs(y.div,{className:"p-5 rounded-xl text-center",style:{background:`
                radial-gradient(circle at 30% 20%, color-mix(in srgb, ${r.color} 12%, transparent) 0%, transparent 60%),
                color-mix(in srgb, ${r.color} 6%, transparent)
              `,border:`2px solid color-mix(in srgb, ${r.color} 25%, transparent)`,boxShadow:`
                0 8px 32px rgba(0, 0, 0, 0.2),
                0 0 20px color-mix(in srgb, ${r.color} 20%, transparent),
                inset 0 1px 0 rgba(255, 255, 255, 0.15)
              `},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.8},children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[e.jsx(h,{Icon:u.Lightbulb,size:18,style:{color:r.color}}),e.jsx("h4",{className:"font-bold text-lg",style:{color:r.color},children:t?"Analyse IA de Performance":"Analyse de Performance"})]}),e.jsx("p",{className:"text-white/90 text-base leading-relaxed mb-4",children:t?t.motivationalMessage:s.consistencyScore>=80?`Excellente maîtrise ! Vous avez forgé une discipline temporelle remarquable avec ${s.totalSessions} sessions et ${s.totalFastedHours}h de jeûne total.`:s.consistencyScore>=60?`Bonne progression ! Votre régularité s'améliore avec ${s.currentStreak} jours de série actuelle. Continuez sur cette lancée.`:s.consistencyScore>=40?`Développement en cours. Votre record personnel est de ${s.longestFast}h. Visez la régularité pour optimiser les bénéfices.`:`Début de votre forge temporelle ! Chaque session compte. Votre meilleure série est de ${s.bestStreak} jours.`}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full",style:{background:`color-mix(in srgb, ${r.color} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 20%, transparent)`},children:[e.jsx(h,{Icon:u.Target,size:14,style:{color:r.color}}),e.jsx("span",{className:"text-sm font-medium",style:{color:r.color},children:t?t.nextMilestone:s.currentStreak===0?"Objectif : Commencer une série":s.currentStreak<7?`Objectif : Atteindre 7 jours (${7-s.currentStreak} restants)`:s.bestStreak<14?"Objectif : Série de 14 jours":"Objectif : Maintenir l'excellence"})]})]}),t&&e.jsxs(y.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("h5",{className:"text-white font-semibold mb-2 flex items-center gap-2",children:[e.jsx(h,{Icon:u.FileText,size:14,className:"text-cyan-400"}),"Résumé Narratif IA"]}),e.jsx("p",{className:"text-white/85 text-sm leading-relaxed",children:t.narrativeSummary})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("h5",{className:"text-white font-semibold mb-2 flex items-center gap-2",children:[e.jsx(h,{Icon:u.TrendingUp,size:14,className:"text-green-400"}),"Analyse de Tendances"]}),e.jsx("p",{className:"text-white/85 text-sm leading-relaxed",children:t.trendAnalysis})]}),t.strategicRecommendations.length>0&&e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("h5",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(h,{Icon:u.Target,size:14,className:"text-green-400"}),"Recommandations Stratégiques IA"]}),e.jsx("div",{className:"space-y-2",children:t.strategicRecommendations.map((x,o)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400 mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-white/85 text-sm leading-relaxed",children:x})]},o))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"text-white/80 font-medium text-sm flex items-center gap-2",children:[e.jsx(h,{Icon:u.Clock,size:14,className:"text-cyan-400"}),"Métriques Temporelles"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-white/5",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Temps total jeûné"}),e.jsxs("span",{className:"text-white font-medium",children:[s.totalFastedHours,"h"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-white/5",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Durée moyenne"}),e.jsxs("span",{className:"text-white font-medium",children:[s.averageDuration,"h"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-white/5",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Record personnel"}),e.jsxs("span",{className:"text-white font-medium",children:[s.longestFast,"h"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"text-white/80 font-medium text-sm flex items-center gap-2",children:[e.jsx(h,{Icon:u.TrendingUp,size:14,className:"text-green-400"}),"Performance"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-white/5",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Taux de succès"}),e.jsxs("span",{className:"text-white font-medium",children:[s.successRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-white/5",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Série actuelle"}),e.jsxs("span",{className:"text-white font-medium",children:[s.currentStreak," jours"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-white/5",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Meilleure série"}),e.jsxs("span",{className:"text-white font-medium",children:[s.bestStreak," jours"]})]})]})]})]}),(a||l||c!==void 0)&&e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-white/50 pt-2 border-t border-white/10",children:[a&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.Zap,size:10}),e.jsx("span",{children:a})]}),l&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.Activity,size:10}),e.jsxs("span",{children:[l," tokens"]})]}),c&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.Shield,size:10}),e.jsx("span",{children:"Résultat mis en cache"})]})]})]})})})};function ls(s){switch(s){case"success":return"#22C55E";case"partial":return"#F59E0B";case"missed":return"#EF4444";case"none":return"rgba(255, 255, 255, 0.1)"}}function V(s){switch(s){case"success":return"Succès";case"partial":return"Partiel";case"missed":return"Manqué";case"none":return"Aucun jeûne"}}const cs=({data:s,periodDays:n,className:t=""})=>{const{isPerformanceMode:a}=D(),l=a?"div":y.div,c=_.useMemo(()=>{if(n<14)return null;const d=[];for(let r=0;r<s.length;r+=7){const x=s.slice(r,r+7),o=x.reduce((m,g)=>m+g.sessionsCount,0),p=x.reduce((m,g)=>m+g.totalHours,0),b=x.filter(m=>m.outcome==="success").length/7*100;d.push({weekStart:x[0]?.date||"",weekEnd:x[x.length-1]?.date||"",sessionsCount:o,totalHours:Math.round(p*10)/10,successRate:Math.round(b)})}return d},[s,n]),i=_.useMemo(()=>{const d=s.length,r=s.filter(p=>p.hasFasted).length,x=s.filter(p=>p.outcome==="success").length,o=s.filter(p=>p.outcome==="partial").length;return{totalDays:d,fastedDays:r,successfulDays:x,partialDays:o,consistencyRate:d>0?Math.round(r/d*100):0,successRate:r>0?Math.round(x/r*100):0}},[s]);return e.jsx(l,{...!a&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6}},className:t,children:e.jsx(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, #06B6D4 12%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, #3B82F6 8%, transparent) 0%, transparent 50%),
            var(--glass-opacity)
          `,borderColor:"color-mix(in srgb, #06B6D4 25%, transparent)",boxShadow:`
            0 12px 40px rgba(0, 0, 0, 0.25),
            0 0 30px color-mix(in srgb, #06B6D4 15%, transparent),
            inset 0 2px 0 rgba(255, 255, 255, 0.15)
          `,backdropFilter:a?"none":"blur(20px) saturate(160%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
                    linear-gradient(135deg, color-mix(in srgb, #06B6D4 35%, transparent), color-mix(in srgb, #06B6D4 25%, transparent))
                  `,border:"2px solid color-mix(in srgb, #06B6D4 50%, transparent)",boxShadow:"0 0 20px color-mix(in srgb, #06B6D4 30%, transparent)"},children:e.jsx(h,{Icon:u.BarChart3,size:20,style:{color:"#06B6D4"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Régularité du Jeûne"}),e.jsxs("p",{className:"text-white/80 text-sm",children:[n," derniers jours • ",i.fastedDays,"/",i.totalDays," jours avec jeûne"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-cyan-400"}),e.jsxs("span",{className:"text-white font-bold text-lg",children:[i.consistencyRate,"%"]})]}),e.jsx("div",{className:"text-cyan-300 text-xs",children:"Régularité"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(h,{Icon:u.Calendar,size:16,className:"text-cyan-400"}),"Consistance Quotidienne"]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:s.slice(-49).map((d,r)=>{const x=ls(d.outcome),o=d.outcome==="none"?.3:.8;return e.jsxs(l,{className:"aspect-square rounded-lg flex items-center justify-center relative group cursor-pointer",style:{backgroundColor:x,opacity:o},...!a&&{initial:{scale:0,opacity:0},animate:{scale:1,opacity:o},transition:{duration:.3,delay:r*.02}},title:`${S(I(d.date),"dd/MM")} - ${V(d.outcome)} ${d.totalHours>0?`(${d.totalHours}h)`:""}`,children:[d.sessionsCount>0&&e.jsx("span",{className:"text-white text-xs font-bold",children:d.sessionsCount}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black/80 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:[S(I(d.date),"dd MMM")," - ",V(d.outcome),d.totalHours>0&&` (${d.totalHours}h)`]})]},d.date)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),e.jsx("span",{className:"text-green-300",children:"Succès"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-orange-500"}),e.jsx("span",{className:"text-orange-300",children:"Partiel"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),e.jsx("span",{className:"text-red-300",children:"Manqué"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-white/20"}),e.jsx("span",{className:"text-white/60",children:"Aucun"})]})]})]}),c&&c.length>1&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(h,{Icon:u.CalendarRange,size:16,className:"text-cyan-400"}),"Résumé Hebdomadaire"]}),e.jsx("div",{className:"space-y-2",children:c.slice(-4).map((d,r)=>e.jsxs(l,{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",...!a&&{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:r*.1}},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-medium text-sm",children:["Semaine du ",S(I(d.weekStart),"dd MMM")]}),e.jsxs("div",{className:"text-white/60 text-xs",children:[d.sessionsCount," sessions • ",d.totalHours,"h total"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:d.successRate>=70?"color-mix(in srgb, #22C55E 15%, transparent)":d.successRate>=40?"color-mix(in srgb, #F59E0B 15%, transparent)":"color-mix(in srgb, #EF4444 15%, transparent)",color:d.successRate>=70?"#22C55E":d.successRate>=40?"#F59E0B":"#EF4444"},children:[d.successRate,"% succès"]})})]},d.weekStart))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #22C55E 10%, transparent)",border:"1px solid color-mix(in srgb, #22C55E 20%, transparent)"},children:[e.jsx("div",{className:"text-2xl font-bold text-green-400 mb-1",children:i.successfulDays}),e.jsx("div",{className:"text-green-300 text-sm font-medium",children:"Jours Réussis"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #F59E0B 10%, transparent)",border:"1px solid color-mix(in srgb, #F59E0B 20%, transparent)"},children:[e.jsx("div",{className:"text-2xl font-bold text-orange-400 mb-1",children:i.partialDays}),e.jsx("div",{className:"text-orange-300 text-sm font-medium",children:"Jours Partiels"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #06B6D4 10%, transparent)",border:"1px solid color-mix(in srgb, #06B6D4 20%, transparent)"},children:[e.jsxs("div",{className:"text-2xl font-bold text-cyan-400 mb-1",children:[i.consistencyRate,"%"]}),e.jsx("div",{className:"text-cyan-300 text-sm font-medium",children:"Régularité"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:[i.successRate,"%"]}),e.jsx("div",{className:"text-white/70 text-sm font-medium",children:"Taux Succès"})]})]})]})})})},ds=({sessions:s,periodDays:n,className:t=""})=>{const{isPerformanceMode:a}=D(),l=a?"div":y.div,c=_.useMemo(()=>{if(!s||s.length===0)return[];const o=[...s].filter(b=>b.status==="completed").sort((b,m)=>new Date(b.start_time).getTime()-new Date(m.start_time).getTime()),p=[];let j=null;return o.forEach((b,m)=>{const g=S(I(b.start_time),"yyyy-MM-dd");if(j?_e(I(g),I(j.endDate))===1?(j.endDate=g,j.length+=1):(j.status="completed",p.push(j),j={startDate:g,endDate:g,length:1,status:"active"}):j={startDate:g,endDate:g,length:1,status:"active"},m===o.length-1&&j){const v=S(new Date,"yyyy-MM-dd"),F=S(new Date(Date.now()-864e5),"yyyy-MM-dd");j.endDate===v||j.endDate===F?j.status="active":j.status="completed",p.push(j)}}),p.sort((b,m)=>m.length-b.length)},[s]);if(c.length===0)return e.jsx(N,{className:`p-6 text-center ${t}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-purple-500/20 flex items-center justify-center",children:e.jsx(h,{Icon:u.Flame,size:32,className:"text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucune Série Détectée"}),e.jsx("p",{className:"text-white/70",children:"Complétez des sessions de jeûne consécutives pour créer des séries"})]})]})});const i=c.find(o=>o.status==="active"),d=c[0],r=c.length,x=c.reduce((o,p)=>o+p.length,0)/r;return e.jsx(l,{...!a&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3}},className:t,children:e.jsx(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, #8B5CF6 12%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, #EC4899 8%, transparent) 0%, transparent 50%),
            var(--glass-opacity)
          `,borderColor:"color-mix(in srgb, #8B5CF6 25%, transparent)",boxShadow:`
            0 12px 40px rgba(0, 0, 0, 0.25),
            0 0 30px color-mix(in srgb, #8B5CF6 15%, transparent),
            inset 0 2px 0 rgba(255, 255, 255, 0.15)
          `,backdropFilter:a?"none":"blur(20px) saturate(160%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
                    linear-gradient(135deg, color-mix(in srgb, #8B5CF6 35%, transparent), color-mix(in srgb, #EC4899 25%, transparent))
                  `,border:"2px solid color-mix(in srgb, #8B5CF6 50%, transparent)",boxShadow:"0 0 20px color-mix(in srgb, #8B5CF6 30%, transparent)"},children:e.jsx(h,{Icon:u.Flame,size:20,style:{color:"#8B5CF6"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Séries de Jeûne"}),e.jsxs("p",{className:"text-white/80 text-sm",children:[r," série",r>1?"s":""," détectée",r>1?"s":""]})]})]}),i&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"px-3 py-1.5 rounded-full mb-1",style:{background:"color-mix(in srgb, #22C55E 15%, transparent)",border:"1px solid color-mix(in srgb, #22C55E 25%, transparent)"},children:e.jsx("span",{className:"text-sm font-medium text-green-300",children:"🔥 Série active"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:i.length}),e.jsxs("p",{className:"text-white/60 text-xs",children:["jour",i.length>1?"s":""]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl text-center",style:{background:"color-mix(in srgb, #F59E0B 10%, transparent)",border:"1px solid color-mix(in srgb, #F59E0B 20%, transparent)"},children:[e.jsx("div",{className:"text-3xl font-bold text-orange-400 mb-1",children:d.length}),e.jsx("div",{className:"text-orange-300 text-sm font-medium",children:"Record"}),e.jsx("div",{className:"text-orange-200 text-xs mt-1",children:S(I(d.startDate),"dd MMM",{locale:U})})]}),e.jsxs("div",{className:"p-4 rounded-xl text-center",style:{background:"color-mix(in srgb, #8B5CF6 10%, transparent)",border:"1px solid color-mix(in srgb, #8B5CF6 20%, transparent)"},children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-1",children:x.toFixed(1)}),e.jsx("div",{className:"text-purple-300 text-sm font-medium",children:"Moyenne"}),e.jsx("div",{className:"text-purple-200 text-xs mt-1",children:"par série"})]}),e.jsxs("div",{className:"p-4 rounded-xl text-center",style:{background:"color-mix(in srgb, #EC4899 10%, transparent)",border:"1px solid color-mix(in srgb, #EC4899 20%, transparent)"},children:[e.jsx("div",{className:"text-3xl font-bold text-pink-400 mb-1",children:r}),e.jsx("div",{className:"text-pink-300 text-sm font-medium",children:"Séries"}),e.jsx("div",{className:"text-pink-200 text-xs mt-1",children:"au total"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(h,{Icon:u.TrendingUp,size:16,className:"text-purple-400"}),"Top 5 des Séries"]}),e.jsx("div",{className:"space-y-3",children:c.slice(0,5).map((o,p)=>{const j=o.status==="active",b=o===d;return e.jsx(l,{className:"relative p-4 rounded-xl",style:{background:j?"color-mix(in srgb, #22C55E 8%, transparent)":"rgba(255, 255, 255, 0.03)",border:j?"1px solid color-mix(in srgb, #22C55E 20%, transparent)":"1px solid rgba(255, 255, 255, 0.05)"},...!a&&{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:p*.1}},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:j?"linear-gradient(135deg, #22C55E, #10B981)":b?"linear-gradient(135deg, #F59E0B, #EF4444)":"linear-gradient(135deg, #8B5CF6, #EC4899)",boxShadow:j||b?`0 0 12px ${j?"#22C55E":"#F59E0B"}80`:"none"},children:e.jsx("span",{className:"text-white font-bold text-lg",children:p+1})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white font-semibold text-lg",children:[o.length," jour",o.length>1?"s":""]}),b&&e.jsx("div",{className:"px-2 py-0.5 rounded-full bg-orange-500/20 border border-orange-400/30",children:e.jsx("span",{className:"text-orange-300 text-xs font-semibold",children:"🏆 Record"})}),j&&e.jsx("div",{className:"px-2 py-0.5 rounded-full bg-green-500/20 border border-green-400/30",children:e.jsx("span",{className:"text-green-300 text-xs font-semibold",children:"🔥 Active"})})]}),e.jsxs("div",{className:"text-white/60 text-xs mt-0.5",children:[S(I(o.startDate),"dd MMM",{locale:U})," - ",S(I(o.endDate),"dd MMM",{locale:U})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx(h,{Icon:u.Flame,size:24,style:{color:j?"#22C55E":b?"#F59E0B":"#8B5CF6"}})})]})},`${o.startDate}-${p}`)})})]}),e.jsx("div",{className:"p-4 rounded-xl",style:{background:i?"color-mix(in srgb, #22C55E 6%, transparent)":"color-mix(in srgb, #8B5CF6 6%, transparent)",border:i?"1px solid color-mix(in srgb, #22C55E 18%, transparent)":"1px solid color-mix(in srgb, #8B5CF6 18%, transparent)",backdropFilter:a?"none":"blur(8px) saturate(120%)"},children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(h,{Icon:i?u.TrendingUp:u.Info,size:14,style:{color:i?"#22C55E":"#8B5CF6"},className:"mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:i?"#22C55E":"#8B5CF6"},children:i?`Série active de ${i.length} jour${i.length>1?"s":""} !`:"Démarrez une nouvelle série"}),e.jsx("p",{className:"text-xs mt-1",style:{color:i?"#22C55ECC":"#8B5CF6CC"},children:i?i.length>=d.length?"🎉 Nouveau record en cours ! Continuez ainsi !":`Plus que ${d.length-i.length} jour${d.length-i.length>1?"s":""} pour égaler votre record`:"Complétez une session de jeûne aujourd'hui pour commencer une nouvelle série"})]})]})})]})})})},xs=({data:s,periodDays:n,className:t=""})=>{const{isPerformanceMode:a}=D(),l=a?"div":y.div,c=s.filter(x=>x.sessionsCount>0),i=_.useMemo(()=>{if(c.length===0)return{maxDuration:0,minDuration:0,averageDuration:0,trend:"stable",improvement:0};const x=c.map(w=>w.averageDuration),o=Math.max(...x),p=Math.min(...x),j=x.reduce((w,C)=>w+C,0)/x.length,b=Math.floor(c.length/2),m=c.slice(0,b),g=c.slice(b),v=m.length>0?m.reduce((w,C)=>w+C.averageDuration,0)/m.length:0,k=(g.length>0?g.reduce((w,C)=>w+C.averageDuration,0)/g.length:0)-v,P=k>.5?"improving":k<-.5?"declining":"stable";return{maxDuration:Math.round(o*10)/10,minDuration:Math.round(p*10)/10,averageDuration:Math.round(j*10)/10,trend:P,improvement:Math.round(k*10)/10}},[c]),r=(()=>{switch(i.trend){case"improving":return{color:"#22C55E",icon:"TrendingUp",label:"En amélioration",description:`+${i.improvement}h en moyenne`};case"declining":return{color:"#EF4444",icon:"TrendingDown",label:"En baisse",description:`${i.improvement}h en moyenne`};case"stable":default:return{color:"#06B6D4",icon:"Minus",label:"Stable",description:"Durées constantes"}}})();return c.length===0?e.jsx(N,{className:`p-6 text-center ${t}`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-cyan-500/20 flex items-center justify-center",children:e.jsx(h,{Icon:u.LineChart,size:32,className:"text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Aucune Donnée de Tendance"}),e.jsx("p",{className:"text-white/70",children:"Complétez quelques sessions de jeûne pour voir l'évolution de vos durées"})]})]})}):e.jsx(l,{...!a&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2}},className:t,children:e.jsx(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${r.color} 12%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, #8B5CF6 8%, transparent) 0%, transparent 50%),
            var(--glass-opacity)
          `,borderColor:`color-mix(in srgb, ${r.color} 25%, transparent)`,boxShadow:`
            0 12px 40px rgba(0, 0, 0, 0.25),
            0 0 30px color-mix(in srgb, ${r.color} 15%, transparent),
            inset 0 2px 0 rgba(255, 255, 255, 0.15)
          `,backdropFilter:a?"none":"blur(20px) saturate(160%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
                    linear-gradient(135deg, color-mix(in srgb, ${r.color} 35%, transparent), color-mix(in srgb, ${r.color} 25%, transparent))
                  `,border:`2px solid color-mix(in srgb, ${r.color} 50%, transparent)`,boxShadow:`0 0 20px color-mix(in srgb, ${r.color} 30%, transparent)`},children:e.jsx(h,{Icon:u[r.icon],size:20,style:{color:r.color}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Évolution des Durées"}),e.jsxs("p",{className:"text-white/80 text-sm",children:[c.length," jours avec données • ",r.label]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"px-3 py-1.5 rounded-full",style:{background:`color-mix(in srgb, ${r.color} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 25%, transparent)`},children:e.jsx("span",{className:"text-sm font-medium",style:{color:r.color},children:r.description})})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(h,{Icon:u.LineChart,size:16,className:"text-purple-400"}),"Tendance des Durées"]}),e.jsx("div",{className:"relative h-32 bg-white/5 rounded-xl p-4 overflow-hidden",children:e.jsx("div",{className:"relative h-full flex items-end justify-between",children:c.slice(-14).map((x,o)=>{const p=i.maxDuration>0?x.averageDuration/i.maxDuration*100:0;return e.jsxs(l,{className:"flex flex-col items-center group cursor-pointer",style:{width:`${100/Math.min(c.length,14)}%`},...!a&&{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},transition:{duration:.5,delay:o*.05}},children:[e.jsx("div",{className:"w-2 bg-gradient-to-t from-cyan-500 to-purple-400 rounded-full mb-1 transition-all duration-200 group-hover:w-3",style:{height:`${Math.max(p,5)}%`}}),e.jsx("div",{className:"text-xs text-white/60 transform -rotate-45 origin-bottom-left whitespace-nowrap",children:S(I(x.date),"dd/MM")}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black/80 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:[S(I(x.date),"dd MMM")," - ",x.averageDuration,"h",x.sessionsCount>1&&` (${x.sessionsCount} sessions)`]})]},x.date)})})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #22C55E 10%, transparent)",border:"1px solid color-mix(in srgb, #22C55E 20%, transparent)"},children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-1",children:[i.maxDuration,"h"]}),e.jsx("div",{className:"text-green-300 text-sm font-medium",children:"Maximum"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #06B6D4 10%, transparent)",border:"1px solid color-mix(in srgb, #06B6D4 20%, transparent)"},children:[e.jsxs("div",{className:"text-2xl font-bold text-cyan-400 mb-1",children:[i.averageDuration,"h"]}),e.jsx("div",{className:"text-cyan-300 text-sm font-medium",children:"Moyenne"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #8B5CF6 10%, transparent)",border:"1px solid color-mix(in srgb, #8B5CF6 20%, transparent)"},children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:[i.minDuration,"h"]}),e.jsx("div",{className:"text-purple-300 text-sm font-medium",children:"Minimum"})]})]})]})})})},ms=s=>{switch(s){case 7:return 5;case 30:return 12;case 90:return 20;default:return 5}},ps=()=>{const{profile:s,session:n}=A(),{isPerformanceMode:t}=D(),a=z(),[l,c]=H.useState(7),i=t?"div":y.div,{data:d}=ee(),{data:r,isLoading:x,error:o}=rs(l),p=r?.metrics?.totalSessions||0;return e.jsxs(i,{...!t&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"inline-flex gap-2 p-1 rounded-lg",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:t?"none":"blur(10px)"},children:[7,30,90].map(j=>{const b=l===j,m="#06B6D4",g=ms(j),v=p>=g;return e.jsx("button",{onClick:()=>{v&&c(j)},disabled:!v,className:"px-6 py-2.5 rounded-lg text-sm font-medium",style:{background:b?`${m}33`:"transparent",color:b?m:v?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.4)",border:b?`1px solid ${m}66`:"1px solid transparent",boxShadow:t?"none":b?`0 0 20px ${m}4D`:"none",opacity:v?1:.5,cursor:v?"pointer":"not-allowed",transition:t?"all 0.15s ease":"all 0.2s ease"},children:j===7?"7 jours":j===30?"30 jours":"90 jours"},j)})})}),x&&e.jsx(ns,{}),o&&e.jsx(N,{className:"p-6",style:{background:"color-mix(in srgb, #EF4444 8%, transparent)",borderColor:"color-mix(in srgb, #EF4444 20%, transparent)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center",children:e.jsx(h,{Icon:u.AlertCircle,size:16,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-300 font-semibold",children:"Erreur d'Analyse"}),e.jsx("p",{className:"text-red-200 text-sm",children:"Impossible de charger les données de progression."})]})]})}),r&&r.metrics.totalSessions===0&&!x&&e.jsx(N,{className:"p-8 text-center",style:{background:`
            radial-gradient(ellipse at center,
              rgba(6, 182, 212, 0.15) 0%,
              rgba(34, 211, 238, 0.08) 50%,
              rgba(0, 0, 0, 0.4) 100%)
          `,borderColor:"color-mix(in srgb, #06B6D4 30%, transparent)",boxShadow:t?"0 8px 32px rgba(0, 0, 0, 0.3)":`
              0 0 30px rgba(6, 182, 212, 0.2),
              0 8px 32px rgba(0, 0, 0, 0.3),
              inset 0 1px 0 rgba(255, 255, 255, 0.1)
            `,backdropFilter:t?"none":"blur(20px) saturate(1.2)"},children:e.jsxs("div",{className:"space-y-6 flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                  rgba(6, 182, 212, 0.3) 0%,
                  rgba(34, 211, 238, 0.15) 70%,
                  transparent 100%)`,border:"1px solid rgba(6, 182, 212, 0.4)",boxShadow:t?"0 4px 20px rgba(0, 0, 0, 0.2)":`
                    0 0 25px rgba(6, 182, 212, 0.3),
                    0 4px 20px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2)
                  `},children:e.jsx(h,{Icon:u.TrendingUp,size:48,className:"text-cyan-400",style:{filter:t?"none":`drop-shadow(0 0 12px rgba(6, 182, 212, 0.8))
                       drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3))`}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Progression en Construction"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Plus de sessions nécessaires pour l'analyse"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 my-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                      rgba(6, 182, 212, 0.3) 0%,
                      rgba(34, 211, 238, 0.1) 70%,
                      transparent 100%)`,border:"1px solid rgba(6, 182, 212, 0.4)",boxShadow:t?"0 4px 15px rgba(0, 0, 0, 0.2)":`
                        0 0 20px rgba(6, 182, 212, 0.3),
                        0 4px 15px rgba(0, 0, 0, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2)
                      `},children:e.jsx(h,{Icon:u.BarChart3,size:24,className:"text-cyan-400",style:{filter:t?"none":`drop-shadow(0 0 8px rgba(6, 182, 212, 0.6))
                           drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Graphiques Évolutifs"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Visualisez votre progression avec des graphiques détaillés"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                      rgba(6, 182, 212, 0.3) 0%,
                      rgba(34, 211, 238, 0.1) 70%,
                      transparent 100%)`,border:"1px solid rgba(6, 182, 212, 0.4)",boxShadow:t?"0 4px 15px rgba(0, 0, 0, 0.2)":`
                        0 0 20px rgba(6, 182, 212, 0.3),
                        0 4px 15px rgba(0, 0, 0, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2)
                      `},children:e.jsx(h,{Icon:u.Activity,size:24,className:"text-cyan-400",style:{filter:t?"none":`drop-shadow(0 0 8px rgba(6, 182, 212, 0.6))
                           drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Métriques Avancées"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Suivez votre consistance, vos streaks et vos tendances"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                      rgba(6, 182, 212, 0.3) 0%,
                      rgba(34, 211, 238, 0.1) 70%,
                      transparent 100%)`,border:"1px solid rgba(6, 182, 212, 0.4)",boxShadow:t?"0 4px 15px rgba(0, 0, 0, 0.2)":`
                        0 0 20px rgba(6, 182, 212, 0.3),
                        0 4px 15px rgba(0, 0, 0, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2)
                      `},children:e.jsx(h,{Icon:u.Award,size:24,className:"text-cyan-400",style:{filter:t?"none":`drop-shadow(0 0 8px rgba(6, 182, 212, 0.6))
                           drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Suivi des Objectifs"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Mesurez vos progrès vers vos objectifs de jeûne"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:()=>a("/fasting/input"),className:"group relative px-8 py-4 text-white font-semibold rounded-2xl",style:{background:`linear-gradient(135deg,
                    rgba(6, 182, 212, 0.8) 0%,
                    rgba(34, 211, 238, 0.9) 100%)`,border:"2px solid rgba(6, 182, 212, 0.6)",boxShadow:t?"0 8px 25px rgba(0, 0, 0, 0.3)":`
                      0 0 30px rgba(6, 182, 212, 0.4),
                      0 8px 25px rgba(0, 0, 0, 0.3),
                      inset 0 1px 0 rgba(255, 255, 255, 0.2),
                      inset 0 -1px 0 rgba(0, 0, 0, 0.2)
                    `,backdropFilter:t?"none":"blur(10px) saturate(1.2)",transform:t?"none":void 0,transition:t?"all 0.15s ease":"all 0.3s ease"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{Icon:u.Timer,size:24,className:t?"":"group-hover:rotate-12 transition-transform duration-300",style:{color:"white",filter:t?"none":`drop-shadow(0 0 10px rgba(6, 182, 212, 0.8))
                           drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3))`}}),e.jsx("span",{className:"text-lg",children:"Ajouter des Sessions de Jeûne"})]}),!t&&e.jsx("div",{className:"absolute inset-0 rounded-2xl blur-xl opacity-50 group-hover:opacity-75 transition-opacity duration-300 -z-10",style:{background:`linear-gradient(135deg,
                        rgba(6, 182, 212, 0.6) 0%,
                        rgba(34, 211, 238, 0.6) 100%)`}})]})}),e.jsx("div",{className:"text-white/50 text-sm p-3 rounded-xl",style:{background:`radial-gradient(ellipse at center,
                  rgba(6, 182, 212, 0.1) 0%,
                  transparent 70%)`,border:"1px solid rgba(6, 182, 212, 0.2)",boxShadow:t?"none":"0 0 15px rgba(6, 182, 212, 0.1)"},children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(h,{Icon:u.Info,size:16,className:"text-cyan-400",style:{filter:t?"none":"drop-shadow(0 0 6px rgba(6, 182, 212, 0.6))"}}),e.jsx("span",{children:"Continuez à enregistrer vos sessions pour débloquer des analyses détaillées de votre évolution !"})]})})]})}),r&&r.metrics.totalSessions>0&&!x&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(os,{metrics:r.metrics,periodDays:l,aiAnalysis:r.aiAnalysis,aiModel:r.aiModel,tokensUsed:r.tokensUsed,cached:r.cached}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(cs,{data:r.consistencyData,periodDays:l}),e.jsx(xs,{data:r.durationTrend||[],periodDays:l})]}),r.sessions&&e.jsx(ds,{sessions:r.sessions,periodDays:l})]})]})},gs=({filters:s,onFiltersChange:n,totalSessions:t,filteredSessions:a,className:l=""})=>{const{data:c}=qe(),[i,d]=_.useState(!1),r=(p,j)=>{n({...s,[p]:j})},x=()=>{n({})},o=Object.keys(s).some(p=>{const j=s[p];return j!==void 0&&j!==""&&j!=="all"});return e.jsx(y.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4},className:l,children:e.jsx(N,{className:"p-4",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, #8B5CF6 8%, transparent) 0%, transparent 60%),
            var(--glass-opacity)
          `,borderColor:"color-mix(in srgb, #8B5CF6 20%, transparent)",boxShadow:`
            0 8px 32px rgba(0, 0, 0, 0.2),
            0 0 20px color-mix(in srgb, #8B5CF6 12%, transparent),
            inset 0 1px 0 rgba(255, 255, 255, 0.12)
          `},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{background:"color-mix(in srgb, #8B5CF6 15%, transparent)",border:"1px solid color-mix(in srgb, #8B5CF6 25%, transparent)"},children:e.jsx(h,{Icon:u.Search,size:14,style:{color:"#8B5CF6"}})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-purple-300 font-semibold",children:"Filtres d'Historique"}),e.jsxs("p",{className:"text-purple-200 text-sm",children:[a," / ",t," sessions"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx("button",{onClick:x,className:"btn-glass--secondary-nav px-3 py-1.5 text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{Icon:u.RotateCcw,size:12}),e.jsx("span",{children:"Reset"})]})}),e.jsx("button",{onClick:()=>d(!i),className:"btn-glass px-3 py-1.5",children:e.jsx(h,{Icon:i?u.ChevronUp:u.ChevronDown,size:14})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("select",{value:s.status||"all",onChange:p=>r("status",p.target.value==="all"?void 0:p.target.value),className:"glass-input text-sm py-2 px-3",style:{minWidth:"120px"},children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),e.jsx("option",{value:"completed",children:"Complétées"}),e.jsx("option",{value:"cancelled",children:"Annulées"})]}),c&&c.length>0&&e.jsxs("select",{value:s.protocol||"",onChange:p=>r("protocol",p.target.value||void 0),className:"glass-input text-sm py-2 px-3",style:{minWidth:"140px"},children:[e.jsx("option",{value:"",children:"Tous les protocoles"}),c.map(p=>{const j=J.find(b=>b.id===p);return e.jsx("option",{value:p,children:j?.name||p},p)})]})]}),i&&e.jsxs(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"space-y-4 pt-4 border-t border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Durée minimale (heures)"}),e.jsx("input",{type:"number",min:"0",max:"48",step:"0.5",value:s.minDuration||"",onChange:p=>r("minDuration",p.target.value?Number(p.target.value):void 0),className:"glass-input text-sm",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Durée maximale (heures)"}),e.jsx("input",{type:"number",min:"0",max:"48",step:"0.5",value:s.maxDuration||"",onChange:p=>r("maxDuration",p.target.value?Number(p.target.value):void 0),className:"glass-input text-sm",placeholder:"48"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Date de début"}),e.jsx("input",{type:"date",value:s.dateRange?.start?format(s.dateRange.start,"yyyy-MM-dd"):"",onChange:p=>{if(p.target.value)r("dateRange",{...s.dateRange,start:new Date(p.target.value)});else{const{start:j,...b}=s.dateRange||{};r("dateRange",Object.keys(b).length>0?b:void 0)}},className:"glass-input text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Date de fin"}),e.jsx("input",{type:"date",value:s.dateRange?.end?format(s.dateRange.end,"yyyy-MM-dd"):"",onChange:p=>{if(p.target.value)r("dateRange",{...s.dateRange,end:new Date(p.target.value)});else{const{end:j,...b}=s.dateRange||{};r("dateRange",Object.keys(b).length>0?b:void 0)}},className:"glass-input text-sm"})]})]})]}),o&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-white/10",children:[s.status&&s.status!=="all"&&e.jsxs("div",{className:"chip chip--on flex items-center gap-1",children:[e.jsxs("span",{children:["Statut: ",s.status==="completed"?"Complétées":"Annulées"]}),e.jsx("button",{onClick:()=>r("status",void 0),children:e.jsx(h,{Icon:u.X,size:10})})]}),s.protocol&&e.jsxs("div",{className:"chip chip--on flex items-center gap-1",children:[e.jsxs("span",{children:["Protocole: ",s.protocol]}),e.jsx("button",{onClick:()=>r("protocol",void 0),children:e.jsx(h,{Icon:u.X,size:10})})]}),s.minDuration!==void 0&&e.jsxs("div",{className:"chip chip--on flex items-center gap-1",children:[e.jsxs("span",{children:["Min: ",s.minDuration,"h"]}),e.jsx("button",{onClick:()=>r("minDuration",void 0),children:e.jsx(h,{Icon:u.X,size:10})})]}),s.maxDuration!==void 0&&e.jsxs("div",{className:"chip chip--on flex items-center gap-1",children:[e.jsxs("span",{children:["Max: ",s.maxDuration,"h"]}),e.jsx("button",{onClick:()=>r("maxDuration",void 0),children:e.jsx(h,{Icon:u.X,size:10})})]})]})]})})})};function us(s){return s>=90?{color:"#22C55E",icon:"Check",badge:"Excellent",description:"Discipline exceptionnelle"}:s>=70?{color:"#F59E0B",icon:"Target",badge:"Bien",description:"Bonne régularité"}:s>=50?{color:"#06B6D4",icon:"TrendingUp",badge:"Modéré",description:"En progression"}:{color:"#8B5CF6",icon:"Timer",badge:"Débutant",description:"Développement en cours"}}const hs=({stats:s,className:n=""})=>{const t=s.totalSessions>0?s.completedSessions/s.totalSessions*100:0,a=us(t);return e.jsx(y.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:[.25,.1,.25,1]},className:n,children:e.jsx(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${a.color} 15%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, ${a.color} 10%, transparent) 0%, transparent 50%),
            var(--glass-opacity)
          `,borderColor:`color-mix(in srgb, ${a.color} 30%, transparent)`,boxShadow:`
            0 16px 48px rgba(0, 0, 0, 0.3),
            0 0 40px color-mix(in srgb, ${a.color} 25%, transparent),
            inset 0 2px 0 rgba(255, 255, 255, 0.2)
          `,backdropFilter:"blur(24px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center breathing-icon",style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                    linear-gradient(135deg, color-mix(in srgb, ${a.color} 40%, transparent), color-mix(in srgb, ${a.color} 30%, transparent))
                  `,border:`2px solid color-mix(in srgb, ${a.color} 60%, transparent)`,boxShadow:`0 0 25px color-mix(in srgb, ${a.color} 50%, transparent)`},children:e.jsx(h,{Icon:u[a.icon],size:20,style:{color:a.color},variant:"pure"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Statistiques Globales"}),e.jsxs("p",{className:"text-white/80 text-sm mt-0.5",children:["Toutes vos sessions • ",a.description]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:a.color,boxShadow:`0 0 8px ${a.color}60`}}),e.jsxs("span",{className:"text-white font-bold text-2xl",children:[Math.round(t),"%"]})]}),e.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{background:`color-mix(in srgb, ${a.color} 15%, transparent)`,color:a.color},children:a.badge})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(y.div,{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #3B82F6 10%, transparent)",border:"1px solid color-mix(in srgb, #3B82F6 20%, transparent)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:s.totalSessions}),e.jsx("div",{className:"text-blue-300 text-sm font-medium",children:"Sessions"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Total"})]}),e.jsxs(y.div,{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #22C55E 10%, transparent)",border:"1px solid color-mix(in srgb, #22C55E 20%, transparent)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:[e.jsx("div",{className:"text-2xl font-bold text-green-400 mb-1",children:s.completedSessions}),e.jsx("div",{className:"text-green-300 text-sm font-medium",children:"Complétées"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Succès"})]}),e.jsxs(y.div,{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #F59E0B 10%, transparent)",border:"1px solid color-mix(in srgb, #F59E0B 20%, transparent)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-400 mb-1",children:[s.totalHours,"h"]}),e.jsx("div",{className:"text-orange-300 text-sm font-medium",children:"Temps Total"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Jeûné"})]}),e.jsxs(y.div,{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #8B5CF6 10%, transparent)",border:"1px solid color-mix(in srgb, #8B5CF6 20%, transparent)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.4},children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:[s.averageDuration,"h"]}),e.jsx("div",{className:"text-purple-300 text-sm font-medium",children:"Moyenne"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Durée"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"text-white/80 font-medium text-sm flex items-center gap-2",children:[e.jsx(h,{Icon:u.Star,size:14,className:"text-yellow-400"}),"Records Personnels"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Session la plus longue"}),e.jsxs("span",{className:"text-white font-bold",children:[s.longestSession,"h"]})]}),s.shortestSession>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Session la plus courte"}),e.jsxs("span",{className:"text-white font-bold",children:[s.shortestSession,"h"]})]}),s.mostUsedProtocol&&e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Protocole favori"}),e.jsx("span",{className:"text-white font-bold",children:s.mostUsedProtocol})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"text-white/80 font-medium text-sm flex items-center gap-2",children:[e.jsx(h,{Icon:u.Calendar,size:14,className:"text-cyan-400"}),"Historique"]}),e.jsxs("div",{className:"space-y-2",children:[s.firstSessionDate&&e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Première session"}),e.jsx("span",{className:"text-white font-bold",children:S(I(s.firstSessionDate),"dd/MM/yyyy")})]}),s.lastSessionDate&&e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Dernière session"}),e.jsx("span",{className:"text-white font-bold",children:S(I(s.lastSessionDate),"dd/MM/yyyy")})]}),s.cancelledSessions>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("span",{className:"text-white/70 text-sm",children:"Sessions annulées"}),e.jsx("span",{className:"text-red-400 font-bold",children:s.cancelledSessions})]})]})]})]}),e.jsxs(y.div,{className:"p-5 rounded-xl text-center",style:{background:`
                radial-gradient(circle at 30% 20%, color-mix(in srgb, ${a.color} 12%, transparent) 0%, transparent 60%),
                color-mix(in srgb, ${a.color} 6%, transparent)
              `,border:`2px solid color-mix(in srgb, ${a.color} 25%, transparent)`,boxShadow:`
                0 8px 32px rgba(0, 0, 0, 0.2),
                0 0 20px color-mix(in srgb, ${a.color} 20%, transparent),
                inset 0 1px 0 rgba(255, 255, 255, 0.15)
              `},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.5},children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[e.jsx(h,{Icon:u.Lightbulb,size:18,style:{color:a.color}}),e.jsx("h4",{className:"font-bold text-lg",style:{color:a.color},children:"Bilan de votre Forge Temporelle"})]}),e.jsx("p",{className:"text-white/90 text-base leading-relaxed",children:t>=90?`Maîtrise exceptionnelle ! Vous avez complété ${s.completedSessions} sessions sur ${s.totalSessions} avec ${s.totalHours}h de jeûne total. Votre discipline temporelle est remarquable.`:t>=70?`Excellente progression ! ${Math.round(t)}% de taux de réussite avec une moyenne de ${s.averageDuration}h par session. Continuez cette régularité.`:t>=50?`Développement solide ! Votre record personnel est de ${s.longestSession}h. Visez plus de régularité pour optimiser les bénéfices métaboliques.`:`Début prometteur ! Chaque session forge votre discipline. Votre parcours temporel commence avec ${s.totalSessions} sessions tentées.`})]})]})})})};function bs(s){return s?J.find(t=>t.id===s)?.name||s:"Protocole personnalisé"}function js(s){if(!s||s<=0)return"--";const n=Math.floor(s),t=Math.floor((s-n)*60);return`${n}h ${t.toString().padStart(2,"0")}m`}const fs=({session:s,index:n,onDelete:t,className:a=""})=>{const{click:l,error:c}=G(),i=He(),[d,r]=_.useState(!1),x=s.actual_duration_hours&&s.target_hours?Se(s.actual_duration_hours,s.target_hours):"missed",o=Ie(x),p=bs(s.protocol_id),j=js(s.actual_duration_hours),b=`${s.target_hours}h`,m=s.actual_duration_hours&&s.target_hours?Math.round(s.actual_duration_hours/s.target_hours*100):0,g=async()=>{try{await i.mutateAsync(s.id),t?.(s.id),r(!1)}catch{}},v=()=>{l(),r(!0)},F=()=>{l(),r(!1)};return e.jsx(y.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,delay:n*.05,ease:[.25,.1,.25,1]},className:a,children:e.jsxs(N,{className:"p-5 relative overflow-visible",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${o.primaryColor} 8%, transparent) 0%, transparent 60%),
            var(--glass-opacity)
          `,borderColor:`color-mix(in srgb, ${o.primaryColor} 20%, transparent)`,boxShadow:`
            0 8px 32px rgba(0, 0, 0, 0.2),
            0 0 20px color-mix(in srgb, ${o.primaryColor} 12%, transparent),
            inset 0 1px 0 rgba(255, 255, 255, 0.12)
          `,backdropFilter:"blur(16px) saturate(150%)"},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.15) 0%, transparent 60%),
                    linear-gradient(135deg, color-mix(in srgb, ${o.primaryColor} 30%, transparent), color-mix(in srgb, ${o.primaryColor} 20%, transparent))
                  `,border:`2px solid color-mix(in srgb, ${o.primaryColor} 40%, transparent)`,boxShadow:`0 0 16px color-mix(in srgb, ${o.primaryColor} 25%, transparent)`},children:e.jsx(h,{Icon:u[o.icon],size:16,style:{color:o.primaryColor}})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold",children:S(I(s.start_time),"dd MMM yyyy")}),e.jsxs("p",{className:"text-white/70 text-sm",children:[p," • ",S(I(s.start_time),"HH:mm")]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"px-3 py-1.5 rounded-full",style:{background:`color-mix(in srgb, ${o.primaryColor} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${o.primaryColor} 25%, transparent)`},children:e.jsx("span",{className:"text-xs font-medium",style:{color:o.primaryColor},children:s.status==="completed"?"Complétée":s.status==="cancelled"?"Annulée":"Active"})}),e.jsx("button",{onClick:v,className:"p-2 rounded-full hover:bg-red-500/20 transition-colors",title:"Supprimer cette session",children:e.jsx(h,{Icon:u.Trash2,size:14,className:"text-red-400"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg",style:{background:`color-mix(in srgb, ${o.primaryColor} 8%, transparent)`,border:`1px solid color-mix(in srgb, ${o.primaryColor} 15%, transparent)`},children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:j}),e.jsx("div",{className:"text-white/70 text-xs",children:"Durée Réelle"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:b}),e.jsx("div",{className:"text-white/70 text-xs",children:"Objectif"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"text-lg font-bold text-white mb-1",children:[m,"%"]}),e.jsx("div",{className:"text-white/70 text-xs",children:"Progression"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:s.end_time?S(I(s.end_time),"HH:mm"):"--:--"}),e.jsx("div",{className:"text-white/70 text-xs",children:"Fin"})]})]}),s.notes&&e.jsx("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(h,{Icon:u.FileText,size:14,className:"text-white/60 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-white/80 font-medium text-sm mb-1",children:"Notes"}),e.jsx("p",{className:"text-white/70 text-sm leading-relaxed",children:s.notes})]})]})}),s.status==="completed"&&s.actual_duration_hours&&s.target_hours&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/70 mb-2",children:[e.jsx("span",{children:"Progression vers l'objectif"}),e.jsxs("span",{children:[m,"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2 overflow-hidden",children:e.jsx(y.div,{className:"h-2 rounded-full relative overflow-hidden",style:{background:`linear-gradient(90deg, ${o.primaryColor}, ${o.secondaryColor})`,boxShadow:`0 0 8px color-mix(in srgb, ${o.primaryColor} 60%, transparent)`,width:`${Math.min(100,m)}%`},initial:{width:0},animate:{width:`${Math.min(100,m)}%`},transition:{duration:.8,ease:"easeOut",delay:.2+n*.05},children:e.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`linear-gradient(90deg, 
                        transparent 0%, 
                        rgba(255,255,255,0.4) 50%, 
                        transparent 100%
                      )`,animation:"progressShimmer 2s ease-in-out infinite"}})})})]})]}),d&&e.jsx(y.div,{className:"absolute inset-0 rounded-inherit flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.9)",backdropFilter:"blur(8px)",zIndex:10},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs("div",{className:"text-center space-y-4 p-4",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-full flex items-center justify-center",style:{background:"color-mix(in srgb, #EF4444 20%, transparent)",border:"2px solid color-mix(in srgb, #EF4444 40%, transparent)"},children:e.jsx(h,{Icon:u.AlertTriangle,size:20,style:{color:"#EF4444"}})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-bold mb-2",children:"Supprimer cette session ?"}),e.jsxs("p",{className:"text-white/80 text-sm",children:["Session du ",S(I(s.start_time),"dd/MM/yyyy")," • ",j]})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:g,disabled:i.isPending,className:"btn-glass--warning px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[i.isPending?e.jsx(h,{Icon:u.Loader2,size:12,className:"animate-spin"}):e.jsx(h,{Icon:u.Trash2,size:12}),e.jsx("span",{children:i.isPending?"Suppression...":"Supprimer"})]})}),e.jsx("button",{onClick:F,className:"btn-glass--secondary-nav px-4 py-2 text-sm",children:e.jsx("span",{children:"Annuler"})})]})]})})]})})},ys=({className:s=""})=>e.jsxs("div",{className:`space-y-6 ${s}`,children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsx(N,{className:"p-6 text-center",style:{background:`
              radial-gradient(circle at 30% 20%, color-mix(in srgb, #8B5CF6 15%, transparent) 0%, transparent 60%),
              radial-gradient(circle at 70% 80%, color-mix(in srgb, #A855F7 12%, transparent) 0%, transparent 50%),
              var(--glass-opacity)
            `,borderColor:"color-mix(in srgb, #8B5CF6 30%, transparent)",boxShadow:`
              0 16px 48px rgba(0, 0, 0, 0.3),
              0 0 40px color-mix(in srgb, #8B5CF6 25%, transparent),
              inset 0 2px 0 rgba(255, 255, 255, 0.2)
            `,backdropFilter:"blur(24px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(y.div,{className:"w-20 h-20 mx-auto rounded-full flex items-center justify-center",style:{background:`
                  radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                  linear-gradient(135deg, color-mix(in srgb, #8B5CF6 40%, transparent), color-mix(in srgb, #A855F7 30%, transparent))
                `,border:"3px solid color-mix(in srgb, #8B5CF6 60%, transparent)",boxShadow:`
                  0 0 40px color-mix(in srgb, #8B5CF6 60%, transparent),
                  0 0 80px color-mix(in srgb, #8B5CF6 40%, transparent)
                `},animate:{scale:[1,1.05,1],boxShadow:["0 0 40px color-mix(in srgb, #8B5CF6 60%, transparent)","0 0 60px color-mix(in srgb, #8B5CF6 80%, transparent)","0 0 40px color-mix(in srgb, #8B5CF6 60%, transparent)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx(h,{Icon:u.History,size:40,style:{color:"#8B5CF6"},className:"animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Chargement de l'Historique"}),e.jsx("p",{className:"text-white/80 text-lg",children:"Récupération de vos sessions temporelles..."})]}),e.jsx("div",{className:"space-y-2 max-w-md mx-auto",children:["Récupération des sessions historiques","Calcul des statistiques globales","Organisation chronologique","Préparation de l'affichage"].map((n,t)=>e.jsxs(y.div,{className:"flex items-center gap-3 p-2 rounded-lg bg-white/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:t*.2},children:[e.jsx(y.div,{className:"w-2 h-2 rounded-full bg-purple-400",animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1.5,repeat:1/0,delay:t*.3}}),e.jsx("span",{className:"text-white/70 text-sm",children:n})]},t))})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(N,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-5 bg-white/10 rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-32 animate-pulse"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(n=>e.jsxs("div",{className:"text-center p-4 rounded-xl bg-white/5",children:[e.jsx("div",{className:"h-8 bg-white/10 rounded w-16 mx-auto mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-20 mx-auto animate-pulse"})]},n))})]})}),[1,2,3,4,5].map(n=>e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3+n*.1},children:e.jsxs(N,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-32 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-24 animate-pulse"})]})]}),e.jsx("div",{className:"h-6 bg-white/10 rounded w-20 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"text-center p-3 rounded-lg bg-white/5",children:[e.jsx("div",{className:"h-5 bg-white/10 rounded w-12 mx-auto mb-1 animate-pulse"}),e.jsx("div",{className:"h-3 bg-white/10 rounded w-16 mx-auto animate-pulse"})]},t))})]})},n))]}),e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:1},className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-purple-500/10 border border-purple-400/20",children:[e.jsx(y.div,{className:"w-2 h-2 rounded-full bg-purple-400",animate:{scale:[1,1.2,1],opacity:[.6,1,.6]},transition:{duration:1,repeat:1/0}}),e.jsx("span",{className:"text-purple-300 text-sm font-medium",children:"Chargement de l'historique..."})]})})]}),vs=()=>{const s=z(),{isPerformanceMode:n}=D(),t=n?"div":y.div,a=()=>{s("/fasting/input")};return e.jsx(t,{...!n&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},className:"text-center py-12 py-1",children:e.jsx(N,{className:"p-8",style:{background:`radial-gradient(ellipse at center,
            rgba(139, 92, 246, 0.15) 0%,
            rgba(167, 139, 250, 0.08) 50%,
            rgba(0, 0, 0, 0.4) 100%)`,borderColor:"rgba(139, 92, 246, 0.3)",boxShadow:`
            0 0 30px rgba(139, 92, 246, 0.2),
            0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.1)
          `,backdropFilter:"blur(20px) saturate(1.2)"},children:e.jsxs("div",{className:"space-y-6 flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                rgba(139, 92, 246, 0.3) 0%,
                rgba(167, 139, 250, 0.15) 70%,
                transparent 100%)`,border:"1px solid rgba(139, 92, 246, 0.4)",boxShadow:`
                0 0 25px rgba(139, 92, 246, 0.3),
                0 4px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2)
              `},children:e.jsx(h,{Icon:u.History,size:48,className:"text-violet-400",style:{filter:`drop-shadow(0 0 12px rgba(139, 92, 246, 0.8))
                         drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3))`}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-3",children:"Démarrez votre journal de jeûne"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Enregistrez votre première session pour construire votre historique"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 my-8",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                    rgba(139, 92, 246, 0.3) 0%,
                    rgba(167, 139, 250, 0.1) 70%,
                    transparent 100%)`,border:"1px solid rgba(139, 92, 246, 0.4)",boxShadow:`
                    0 0 20px rgba(139, 92, 246, 0.3),
                    0 4px 15px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2)
                  `},children:e.jsx(h,{Icon:u.BookOpen,size:24,className:"text-violet-400",style:{filter:`drop-shadow(0 0 8px rgba(139, 92, 246, 0.6))
                             drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Journal détaillé"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Toutes vos sessions archivées avec leurs détails"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                    rgba(139, 92, 246, 0.3) 0%,
                    rgba(167, 139, 250, 0.1) 70%,
                    transparent 100%)`,border:"1px solid rgba(139, 92, 246, 0.4)",boxShadow:`
                    0 0 20px rgba(139, 92, 246, 0.3),
                    0 4px 15px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2)
                  `},children:e.jsx(h,{Icon:u.BarChart,size:24,className:"text-violet-400",style:{filter:`drop-shadow(0 0 8px rgba(139, 92, 246, 0.6))
                             drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Statistiques longue durée"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Analysez vos tendances sur plusieurs mois"})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-xl flex items-center justify-center",style:{background:`radial-gradient(circle,
                    rgba(139, 92, 246, 0.3) 0%,
                    rgba(167, 139, 250, 0.1) 70%,
                    transparent 100%)`,border:"1px solid rgba(139, 92, 246, 0.4)",boxShadow:`
                    0 0 20px rgba(139, 92, 246, 0.3),
                    0 4px 15px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2)
                  `},children:e.jsx(h,{Icon:u.Award,size:24,className:"text-violet-400",style:{filter:`drop-shadow(0 0 8px rgba(139, 92, 246, 0.6))
                             drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))`}})}),e.jsx("h3",{className:"font-semibold text-white",children:"Succès débloqués"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Célébrez vos accomplissements et records"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:a,className:"group relative px-8 py-4 text-white font-semibold rounded-2xl transform hover:scale-105 transition-all duration-300",style:{background:`linear-gradient(135deg,
                  rgba(139, 92, 246, 0.8) 0%,
                  rgba(167, 139, 250, 0.9) 100%)`,border:"2px solid rgba(139, 92, 246, 0.6)",boxShadow:`
                  0 0 30px rgba(139, 92, 246, 0.4),
                  0 8px 25px rgba(0, 0, 0, 0.3),
                  inset 0 1px 0 rgba(255, 255, 255, 0.2),
                  inset 0 -1px 0 rgba(0, 0, 0, 0.2)
                `,backdropFilter:"blur(10px) saturate(1.2)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{Icon:u.Clock,size:24,className:"group-hover:rotate-12 transition-transform duration-300",style:{color:"white",filter:`drop-shadow(0 0 10px rgba(139, 92, 246, 0.8))
                             drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3))`}}),e.jsx("span",{className:"text-lg",children:"Démarrer ma première session"})]}),e.jsx("div",{className:"absolute inset-0 rounded-2xl blur-xl opacity-50 group-hover:opacity-75 transition-opacity duration-300 -z-10",style:{background:`linear-gradient(135deg,
                    rgba(139, 92, 246, 0.6) 0%,
                    rgba(167, 139, 250, 0.6) 100%)`}})]})}),e.jsx("div",{className:"text-white/50 text-sm p-3 rounded-xl",style:{background:`radial-gradient(ellipse at center,
                rgba(139, 92, 246, 0.1) 0%,
                transparent 70%)`,border:"1px solid rgba(139, 92, 246, 0.2)",boxShadow:"0 0 15px rgba(139, 92, 246, 0.1)"},children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(h,{Icon:u.Lightbulb,size:16,className:"text-violet-400",style:{filter:"drop-shadow(0 0 6px rgba(139, 92, 246, 0.6))"}}),e.jsx("span",{children:"Astuce : La régularité est la clé du succès dans le jeûne intermittent !"})]})})]})})})},Ns=()=>{const{isPerformanceMode:s}=D(),[n,t]=H.useState({}),[a,l]=H.useState(!1),c=s?"div":y.div,{data:i,isLoading:d,error:r}=se(100,n),x=o=>{};return e.jsxs(c,{...!s&&{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"}},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Historique Temporel"}),i&&e.jsxs("div",{className:"text-white/60 text-sm",children:[i.sessions.length," session",i.sessions.length>1?"s":"",i.sessions.length!==i.allSessions.length&&` sur ${i.allSessions.length}`]})]}),e.jsx("button",{onClick:()=>l(!a),className:"btn-glass px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{Icon:u.Search,size:14}),e.jsx("span",{children:"Filtres"}),e.jsx(h,{Icon:a?u.ChevronUp:u.ChevronDown,size:12})]})})]}),e.jsx(De,{children:a&&e.jsx(gs,{filters:n,onFiltersChange:t,totalSessions:i?.allSessions.length||0,filteredSessions:i?.sessions.length||0})}),d&&e.jsx(ys,{}),r&&e.jsx(N,{className:"p-6",style:{background:"color-mix(in srgb, #EF4444 8%, transparent)",borderColor:"color-mix(in srgb, #EF4444 20%, transparent)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center",children:e.jsx(h,{Icon:u.AlertCircle,size:16,className:"text-red-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-300 font-semibold",children:"Erreur de Chargement"}),e.jsx("p",{className:"text-red-200 text-sm",children:"Impossible de charger l'historique. Réessayez dans quelques instants."})]})]})}),i&&!d&&e.jsxs("div",{className:"space-y-6",children:[i.sessions.length>0&&e.jsx(hs,{stats:i.stats}),i.sessions.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-white font-semibold text-lg flex items-center gap-2",children:[e.jsx(h,{Icon:u.History,size:18,className:"text-purple-400"}),"Sessions (",i.sessions.length,")"]}),e.jsx("div",{className:"space-y-3",children:i.sessions.map((o,p)=>e.jsx(fs,{session:o,index:p,onDelete:x},o.id))}),i.allSessions.length>i.sessions.length&&e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{onClick:()=>{},className:"btn-glass--secondary-nav px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{Icon:u.ChevronDown,size:16}),e.jsx("span",{children:"Charger plus de sessions"})]})})})]}):Object.keys(n).length===0?e.jsx(vs,{}):e.jsx(N,{className:"p-8 text-center",style:{background:`
                  radial-gradient(circle at 30% 20%, color-mix(in srgb, #8B5CF6 15%, transparent) 0%, transparent 60%),
                  radial-gradient(circle at 70% 80%, color-mix(in srgb, #8B5CF6 12%, transparent) 0%, transparent 50%),
                  linear-gradient(145deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.02) 100%),
                  var(--glass-opacity)
                `,borderColor:"color-mix(in srgb, #8B5CF6 30%, transparent)",boxShadow:s?"0 12px 40px rgba(0, 0, 0, 0.25)":`
                    0 12px 40px rgba(0, 0, 0, 0.25),
                    0 0 30px color-mix(in srgb, #8B5CF6 20%, transparent),
                    inset 0 2px 0 rgba(255, 255, 255, 0.15)
                  `},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center",style:{background:`
                          radial-gradient(circle at 30% 30%, rgba(255,255,255,0.15) 0%, transparent 60%),
                          linear-gradient(135deg, color-mix(in srgb, #8B5CF6 30%, transparent), color-mix(in srgb, #8B5CF6 20%, transparent))
                        `,border:"2px solid color-mix(in srgb, #8B5CF6 40%, transparent)",boxShadow:s?"none":"0 0 30px color-mix(in srgb, #8B5CF6 30%, transparent)"},children:e.jsx(h,{Icon:u.History,size:40,style:{color:"#8B5CF6"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Aucune Session Trouvée"}),e.jsx("p",{className:"text-white/70 text-base",children:"Aucun résultat"})]})]}),e.jsx("div",{children:e.jsx("p",{className:"text-white/70 text-base leading-relaxed max-w-lg mx-auto",children:"Aucune session ne correspond aux filtres sélectionnés. Essayez de modifier vos critères de recherche."})})]})})]})]})};function ws(s){switch(s){case"daily":return{icon:"Timer",title:"Tracker",subtitle:"Suivez vos sessions de jeûne quotidiennes",circuit:"fasting",color:"#F59E0B"};case"insights":return{icon:"TrendingUp",title:"Insights",subtitle:"Analyses de vos patterns de jeûne",circuit:"fasting",color:"#10B981"};case"progression":return{icon:"BarChart3",title:"Progression",subtitle:"Évolution de votre pratique du jeûne",circuit:"fasting",color:"#06B6D4"};case"history":return{icon:"History",title:"Historique",subtitle:"Toutes vos sessions enregistrées",circuit:"fasting",color:"#8B5CF6"};default:return{icon:"Timer",title:"Jeûne Intermittent",subtitle:"Suivez et optimisez vos sessions de jeûne",circuit:"fasting",color:"#F59E0B"}}}const Rs=()=>{const s=re(),{click:n}=G(),[t,a]=_.useState(!1),[l,c]=_.useState(!1),[i,d]=_.useState(null),r=_.useMemo(()=>{const g=s.hash.replace("#","");return g&&["daily","insights","progression","history"].includes(g)?g:"daily"},[s.hash]),x=W(({currentLocation:g,nextLocation:v})=>g.pathname===v.pathname?!1:t);_.useEffect(()=>{x.state==="blocked"&&(f.info("FASTING_PAGE_AI_EXIT","Navigation blocked - AI generation in progress",{activeTab:r,isAIGenerationLoading:t,timestamp:new Date().toISOString()}),d(()=>()=>{x.proceed()}),c(!0))},[x.state,r,t]),le(),xe(`fasting:${r}`);const o=ws(r),p=_.useCallback(g=>{a(g),f.debug("FASTING_PAGE_AI_LOADING","AI generation loading state changed",{activeTab:r,isLoading:g,timestamp:new Date().toISOString()})},[r]),j=()=>{f.info("FASTING_PAGE_AI_EXIT","User chose to stop AI generation and exit",{activeTab:r,timestamp:new Date().toISOString()}),a(!1),c(!1),i&&(i(),d(null))},b=()=>{f.info("FASTING_PAGE_AI_EXIT","User chose to continue AI generation",{activeTab:r,timestamp:new Date().toISOString()}),c(!1),d(null),x.state==="blocked"&&x.reset()},m=g=>{n(),f.debug("FASTING_PAGE","Tab change triggered",{newTab:g})};return e.jsxs("div",{className:"space-y-6 w-full",children:[e.jsx(ce,{icon:o.icon,title:o.title,subtitle:o.subtitle,circuit:o.circuit,iconColor:o.color}),e.jsxs(O,{defaultValue:r,className:"w-full min-w-0 fasting-tabs",onValueChange:m,forgeContext:"fasting",children:[e.jsxs(O.List,{role:"tablist","aria-label":"Sections du jeûne",className:"mb-6 w-full",children:[e.jsx(O.Trigger,{value:"daily",icon:"Calendar",children:e.jsx("span",{className:"tab-text",children:"Tracker"})}),e.jsx(O.Trigger,{value:"insights",icon:"TrendingUp",children:e.jsx("span",{className:"tab-text",children:"Insights"})}),e.jsx(O.Trigger,{value:"progression",icon:"BarChart3",children:e.jsx("span",{className:"tab-text",children:"Progression"})}),e.jsx(O.Trigger,{value:"history",icon:"History",children:e.jsx("span",{className:"tab-text",children:"Historique"})})]}),e.jsx(O.Panel,{value:"daily",children:e.jsx(Re,{onLoadingChange:p})}),e.jsx(O.Panel,{value:"insights",children:e.jsx(Ze,{onLoadingChange:p})}),e.jsx(O.Panel,{value:"progression",children:e.jsx(ps,{onLoadingChange:p})}),e.jsx(O.Panel,{value:"history",children:e.jsx(Ns,{})})]}),l&&e.jsx(de,{isOpen:l,title:"Analyse IA en cours",message:"Une analyse IA est en cours de génération. Êtes-vous sûr de vouloir quitter ?",confirmLabel:"Quitter",cancelLabel:"Continuer l'analyse",onConfirm:j,onCancel:b})]})};export{Rs as default};
