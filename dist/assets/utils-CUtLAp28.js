const _=r=>{let n;const e=new Set,t=(i,g)=>{const h=typeof i=="function"?i(n):i;if(!Object.is(h,n)){const v=n;n=g??(typeof h!="object"||h===null)?h:Object.assign({},n,h),e.forEach(d=>d(n,v))}},a=()=>n,c={setState:t,getState:a,getInitialState:()=>f,subscribe:i=>(e.add(i),()=>e.delete(i))},f=n=r(t,a,c);return c},A=r=>r?_(r):_;function j(r,n){let e;try{e=r()}catch{return}return{getItem:a=>{var s;const m=f=>f===null?null:JSON.parse(f,void 0),c=(s=e.getItem(a))!=null?s:null;return c instanceof Promise?c.then(m):m(c)},setItem:(a,s)=>e.setItem(a,JSON.stringify(s,void 0)),removeItem:a=>e.removeItem(a)}}const b=r=>n=>{try{const e=r(n);return e instanceof Promise?e:{then(t){return b(t)(e)},catch(t){return this}}}catch(e){return{then(t){return this},catch(t){return b(t)(e)}}}},O=(r,n)=>(e,t,a)=>{let s={storage:j(()=>localStorage),partialize:o=>o,version:0,merge:(o,y)=>({...y,...o}),...n},m=!1;const c=new Set,f=new Set;let i=s.storage;if(!i)return r((...o)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),e(...o)},t,a);const g=()=>{const o=s.partialize({...t()});return i.setItem(s.name,{state:o,version:s.version})},h=a.setState;a.setState=(o,y)=>(h(o,y),g());const v=r((...o)=>(e(...o),g()),t,a);a.getInitialState=()=>v;let d;const I=()=>{var o,y;if(!i)return;m=!1,c.forEach(l=>{var u;return l((u=t())!=null?u:v)});const S=((y=s.onRehydrateStorage)==null?void 0:y.call(s,(o=t())!=null?o:v))||void 0;return b(i.getItem.bind(i))(s.name).then(l=>{if(l)if(typeof l.version=="number"&&l.version!==s.version){if(s.migrate){const u=s.migrate(l.state,l.version);return u instanceof Promise?u.then(p=>[!0,p]):[!0,u]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,l.state];return[!1,void 0]}).then(l=>{var u;const[p,H]=l;if(d=s.merge(H,(u=t())!=null?u:v),e(d,!0),p)return g()}).then(()=>{S?.(d,void 0),d=t(),m=!0,f.forEach(l=>l(d))}).catch(l=>{S?.(void 0,l)})};return a.persist={setOptions:o=>{s={...s,...o},o.storage&&(i=o.storage)},clearStorage:()=>{i?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>I(),hasHydrated:()=>m,onHydrate:o=>(c.add(o),()=>{c.delete(o)}),onFinishHydration:o=>(f.add(o),()=>{f.delete(o)})},s.skipHydration||I(),d||v},x=O;function w(r){var n,e,t="";if(typeof r=="string"||typeof r=="number")t+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(n=0;n<a;n++)r[n]&&(e=w(r[n]))&&(t&&(t+=" "),t+=e)}else for(e in r)r[e]&&(t&&(t+=" "),t+=e);return t}function E(){for(var r,n,e=0,t="",a=arguments.length;e<a;e++)(r=arguments[e])&&(n=w(r))&&(t&&(t+=" "),t+=n);return t}const R="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let F=(r=21)=>{let n="",e=crypto.getRandomValues(new Uint8Array(r|=0));for(;r--;)n+=R[e[r]&63];return n};export{E as a,A as b,j as c,F as n,x as p};
