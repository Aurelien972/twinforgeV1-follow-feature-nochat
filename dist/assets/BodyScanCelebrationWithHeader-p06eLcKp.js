import{h as $,u as A,R as g,j as a}from"./vendor-ZbFMzY-i.js";import{t as h}from"./stores-ZZM8MTtI.js";import{N as s,S as x,I as d}from"./ui-components-OHztaiDj.js";import{u as N}from"./useBodyScanPerformance-CZTD3PbH.js";import{u as j,l as p}from"./page-fridge-C1QVLxk9.js";import"./utils-CUtLAp28.js";import"./supabase-8_3juhcZ.js";import"./motion-HGAT--uT.js";import"./page-fridge-scan-C_CisW7P.js";import"./date-utils-BlBdbPk_.js";const C=()=>{const e=N(),n=$(),l=A(),{successMajor:i,success:u}=j(),{completeProgress:f}=h(),v=g.useRef(!1),c=n.state?.scanResults,m=n.state?.isFaceScan||!1;if(g.useEffect(()=>{if(!v.current){if(!c){l(m?"/avatar#avatar":"/body-scan",{replace:!0});return}i(),f(),v.current=!0,p.info("CELEBRATION","Celebration step mounted with scan results",{hasResults:!!c,confidence:y(c),isFaceScan:m})}},[c,l,i,f,m]),!c)return null;const b=y(c),t=(()=>{const r=o=>e.mode==="high-performance"?0:e.mode==="balanced"?Math.ceil(o/2):o;return b>=.9?{title:"ðŸŒŸ Scan Absolument Parfait !",subtitle:"Votre morphologie a Ã©tÃ© capturÃ©e avec une prÃ©cision exceptionnelle",celebrationMessage:"QualitÃ© LÃ©gendaire Atteinte",motivationalQuote:"Votre reflet numÃ©rique sera d'une fidÃ©litÃ© saisissante",color:"#10B981",icon:d.Zap,particleCount:r(12),celebrationLevel:"legendary"}:b>=.7?{title:"âœ¨ Scan Exceptionnel !",subtitle:"Votre avatar sera d'une qualitÃ© remarquable",celebrationMessage:"Excellence Morphologique DÃ©tectÃ©e",motivationalQuote:"PrÃ©parez-vous Ã  dÃ©couvrir votre double numÃ©rique parfait",color:"#22C55E",icon:d.Check,particleCount:r(10),celebrationLevel:"exceptional"}:b>=.5?{title:"ðŸŽ¯ Scan de Haute QualitÃ© !",subtitle:"Votre morphologie a Ã©tÃ© analysÃ©e avec prÃ©cision",celebrationMessage:"Analyse Premium RÃ©ussie",motivationalQuote:"Votre avatar 3D sera fidÃ¨le Ã  votre silhouette unique",color:"#10B981",icon:d.Target,particleCount:r(8),celebrationLevel:"high"}:b>0?{title:"ðŸš€ Scan RÃ©ussi avec Brio !",subtitle:"Votre avatar est prÃªt avec des optimisations intelligentes",celebrationMessage:"Analyse AvancÃ©e ActivÃ©e",motivationalQuote:"Votre scan a Ã©tÃ© optimisÃ© avec prÃ©cision",color:"#F59E0B",icon:d.Zap,particleCount:r(6),celebrationLevel:"optimized"}:{title:"ðŸŽ‰ Avatar 3D CrÃ©Ã© !",subtitle:"Votre reflet numÃ©rique est prÃªt Ã  Ãªtre dÃ©couvert",celebrationMessage:"Scan TerminÃ© avec SuccÃ¨s",motivationalQuote:"Explorez votre avatar 3D personnalisÃ©",color:"#8B5CF6",icon:d.Eye,particleCount:r(6),celebrationLevel:"complete"}})(),S=()=>{u(),l(m?"/avatar#avatar":"/body-scan/review",{state:{scanResults:c},replace:!1})};return a.jsxs("div",{className:"relative overflow-visible pt-4 pb-6 md:pb-8",children:[e.enableParticleEffects&&a.jsxs("div",{className:"celebration-background-effects absolute inset-0 pointer-events-none overflow-visible",children:[a.jsx("div",{className:"celebration-ambient-glow absolute inset-0 rounded-3xl",style:{background:`radial-gradient(circle at center, ${t.color}15, transparent 70%)`,"--celebration-color":t.color}}),[...Array(t.particleCount)].map((r,o)=>a.jsx("div",{className:`celebration-particle celebration-particle--${o+1} absolute w-3 h-3 rounded-full`,style:{background:`radial-gradient(circle, ${t.color}, ${t.color}80)`,left:`${15+o*8}%`,top:`${20+o%4*15}%`,boxShadow:`0 0 12px ${t.color}80, 0 0 24px ${t.color}40`,"--celebration-color":t.color,"--particle-index":o}},o)),[...Array(6)].map((r,o)=>a.jsx("div",{className:`celebration-ray celebration-ray--${o+1} absolute w-1 h-20 rounded-full`,style:{background:`linear-gradient(180deg, ${t.color}60, transparent)`,left:`${30+o*12}%`,top:"10%",transformOrigin:"bottom center","--celebration-color":t.color}},`ray-${o}`))]}),a.jsxs("div",{className:"celebration-main-content relative text-center py-8 md:py-12 z-10",children:[a.jsxs(s,{className:"relative w-32 h-32 mx-auto mb-8",initial:e.enableInitialAnimations?{scale:0,rotate:-180}:!1,animate:e.enableInitialAnimations?{scale:1,rotate:0}:{scale:1},transition:e.enableFramerMotion?{type:"spring",stiffness:200,damping:15,duration:1.2}:void 0,children:[a.jsx("div",{className:"celebration-icon-outer-glow absolute inset-0 rounded-full",style:{background:`radial-gradient(circle, ${t.color}40, transparent 70%)`,filter:"blur(8px)","--celebration-color":t.color}}),a.jsx("div",{className:"celebration-icon-inner-container absolute inset-8 rounded-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${t.color}30, ${t.color}60)`,border:`2px solid ${t.color}`,boxShadow:`0 0 60px ${t.color}90, inset 0 4px 0 rgba(255,255,255,0.3)`,"--celebration-color":t.color},children:a.jsx(x,{Icon:t.icon,size:48,color:t.color})}),e.enablePulseAnimations&&[...Array(e.mode==="quality"?3:1)].map((r,o)=>a.jsx("div",{className:`celebration-icon-pulse-ring celebration-icon-pulse-ring--${o+1} absolute inset-0 rounded-full border-2`,style:{borderColor:`${t.color}40`,"--celebration-color":t.color}},`pulse-${o}`))]}),a.jsxs(s,{initial:e.enableInitialAnimations?{opacity:0,y:30}:!1,animate:e.enableInitialAnimations?{opacity:1,y:0}:{opacity:1},transition:e.enableFramerMotion?{delay:.6,duration:.8}:void 0,children:[a.jsx(s,{as:"h3",className:"celebration-title-glow text-4xl md:text-5xl font-bold text-white mb-4",style:{color:t.color},children:t.title}),a.jsx(s,{as:"p",className:"text-xl text-white/90 mb-6 leading-relaxed max-w-2xl mx-auto",initial:e.enableStaggerAnimations?{opacity:0,y:20}:!1,animate:e.enableStaggerAnimations?{opacity:1,y:0}:{opacity:1},transition:e.enableFramerMotion?{delay:.8,duration:.6}:void 0,children:t.subtitle})]})]}),a.jsx(s,{className:"flex justify-center relative z-10 mt-4",initial:e.enableInitialAnimations?{opacity:0,y:40}:!1,animate:e.enableInitialAnimations?{opacity:1,y:0}:{opacity:1},transition:e.enableFramerMotion?{delay:1,duration:.8}:void 0,children:a.jsxs(s,{as:"button",onClick:S,className:"btn-glass--primary px-12 py-6 text-xl font-bold relative overflow-hidden",whileHover:e.enableWhileHover?{scale:1.03}:void 0,whileTap:e.enableWhileTap?{scale:.97}:void 0,style:{background:`linear-gradient(135deg, ${t.color}80, ${t.color}60)`,boxShadow:`0 12px 40px ${t.color}40, 0 0 60px ${t.color}30`,border:`2px solid ${t.color}`,color:"#0B0F1A"},children:[e.enableShimmerEffects&&a.jsx("div",{className:"celebration-cta-shimmer absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"}),e.enableParticleEffects&&[...Array(4)].map((r,o)=>a.jsx("div",{className:`celebration-cta-sparkle celebration-cta-sparkle--${o+1} absolute w-2 h-2 rounded-full bg-white`,style:{left:`${20+o*20}%`,top:`${30+o%2*40}%`}},o)),a.jsxs("div",{className:"relative flex items-center justify-center gap-4",children:[a.jsx(x,{Icon:d.Eye,size:28,color:"#0B0F1A"}),a.jsx("span",{children:"Mon Avatar 3D"})]})]})}),e.enableParticleEffects&&a.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:[...Array(e.mode==="quality"?8:e.mode==="balanced"?4:0)].map((r,o)=>a.jsx("div",{className:`celebration-confetti celebration-confetti--${o+1} absolute w-2 h-6 rounded-full`,style:{background:`linear-gradient(180deg, ${t.color}, ${t.color}60)`,left:`${10+o*10}%`,top:"-10%","--celebration-color":t.color}},`confetti-${o}`))})]})};function y(e){const n=e?.match?.ai_refinement?.ai_confidence;if(typeof n=="number"&&Number.isFinite(n)&&n>0&&n<=1)return p.debug("CELEBRATION","Using AI refinement confidence (highest priority)",{confidence:n,source:"ai_refinement.ai_confidence",clientScanId:e?.clientScanId,serverScanId:e?.serverScanId,philosophy:"ai_refinement_confidence_priority"}),n;const l=[e?.match?.semantic_coherence_score,e?.estimate?.extracted_data?.processing_confidence,e?.insights?.confidence,e?.estimate?.confidence?.vision,e?.semantic?.semantic_confidence,e?.commit?.confidence,e?.blending?.confidence];for(const i of l)if(typeof i=="number"&&Number.isFinite(i)&&i>0&&i<=1)return p.debug("CELEBRATION","Found valid confidence from fallback source",{confidence:i,source:"fallback_hierarchy",clientScanId:e?.clientScanId,serverScanId:e?.serverScanId,philosophy:"fallback_confidence_used"}),i;return p.warn("CELEBRATION","No valid confidence found in scan results (including AI refinement)",{clientScanId:e?.clientScanId,serverScanId:e?.serverScanId,sourcesChecked:[{source:"ai_refinement.ai_confidence",value:n,type:typeof n,isValid:typeof n=="number"&&Number.isFinite(n)&&n>0&&n<=1},...l.map((i,u)=>({index:u,value:i,type:typeof i,isValid:typeof i=="number"&&Number.isFinite(i)&&i>0&&i<=1}))],philosophy:"no_confidence_found_comprehensive_check"}),0}const z=()=>{const{isActive:e,steps:n,currentStep:l,progress:i,message:u,subMessage:f}=h();return a.jsx("div",{className:"max-w-4xl mx-auto mt-4 space-y-6 pb-4",children:a.jsx(C,{})})};export{z as default};
